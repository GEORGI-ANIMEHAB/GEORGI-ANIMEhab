<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пример Сайта</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Пример Сайта</h1>
            <nav>
                <ul>
                    <li><a href="#home">Главная</a></li>
                    <li><a href="#features">Функции</a></li>
                    <li><a href="#about">О нас</a></li>
                    <li><a href="#contact">Контакты</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="home" class="hero">
        <div class="container">
            <h2>Добро пожаловать!</h2>
            <p>Здесь можно представить ваше основное предложение.</p>
        </div>
    </section>

    <section id="features" class="features">
        <div class="container">
            <h2>Наши функции</h2>
            <div class="feature">
                <h3>Функция 1</h3>
                <p>Описание функции 1.</p>
            </div>
            <div class="feature">
                <h3>Функция 2</h3>
                <p>Описание функции 2.</p>
            </div>
            <!-- Добавьте больше функций по мере необходимости -->
        </div>
    </section>

    <section id="about" class="about">
        <div class="container">
            <h2>О нас</h2>
            <p>Информация о вашей компании или проекте.</p>
        </div>
    </section>

    <section id="contact" class="contact">
        <div class="container">
            <h2>Контакты</h2>
            <form id="contact-form">
                <label for="name">Имя:</label>
                <input type="text" id="name" name="name" required>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                <label for="message">Сообщение:</label>
                <textarea id="message" name="message" required></textarea>
                <button type="submit">Отправить</button>
            </form>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2024 Пример Сайта. Все права защищены.</p>
        </div>
    </footer>

    <script src="scripts.js"></script>
</body>
</html>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

.container {
    width: 80%;
    margin: 0 auto;
}

header {
    background-color: #333;
    color: white;
    padding: 20px 0;
}

header h1 {
    margin: 0;
}

nav ul {
    list-style: none;
    padding: 0;
}

nav ul li {
    display: inline;
    margin-right: 20px;
}

nav ul li a {
    color: white;
    text-decoration: none;
}

.hero {
    background-color: #f4f4f4;
    padding: 60px 0;
    text-align: center;
}

.features {
    padding: 40px 0;
}

.feature {
    margin-bottom: 20px;
}

.about, .contact {
    padding: 40px 0;
}

form {
    display: flex;
    flex-direction: column;
}

form label {
    margin: 10px 0 5px;
}

form input, form textarea {
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
}

form button {
    padding: 10px;
    background-color: #333;
    color: white;
    border: none;
    cursor: pointer;
}

form button:hover {
    background-color: #555;
}

footer {
    background-color: #333;
    color: white;
    padding: 20px 0;
    text-align: center;
}
document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('contact-form');
    
    form.addEventListener('submit', function (event) {
        event.preventDefault();
        
        // Обработка формы
        alert('Форма отправлена!');
    });
});
npm init -y
npm install express body-parser
const express = require('express');
const bodyParser = require('body-parser');
const path = require('path');

const app = express();
const port = 3000;

// Middleware
app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());
app.use(express.static(path.join(__dirname, 'public')));

// Основные маршруты
app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname, 'public', 'index.html'));
});

// Обработка формы
app.post('/submit-form', (req, res) => {
    const { name, email, message } = req.body;
    console.log(`Получено сообщение от ${name} (${email}): ${message}`);
    res.json({ status: 'success', message: 'Форма отправлена!' });
});

app.listen(port, () => {
    console.log(`Сервер запущен на http://localhost:${port}`);
});
/project-root
    /public
        index.html
        styles.css
        scripts.js
    server.js
node server.js
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сложный Сайт</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Сложный Сайт</h1>
            <nav>
                <ul>
                    <li><a href="#home">Главная</a></li>
                    <li><a href="#features">Функции</a></li>
                    <li><a href="#about">О нас</a></li>
                    <li><a href="#contact">Контакты</a></li>
                    <li><a href="#gallery">Галерея</a></li>
                    <li><a href="#faq">Часто задаваемые вопросы</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="home" class="hero">
        <div class="container">
            <h2>Добро пожаловать на наш сайт!</h2>
            <p>Здесь мы предлагаем множество функций и услуг.</p>
            <button id="explore-btn">Узнать больше</button>
        </div>
    </section>

    <section id="features" class="features">
        <div class="container">
            <h2>Наши функции</h2>
            <div class="feature" id="feature1">
                <h3>Функция 1</h3>
                <p>Описание функции 1.</p>
                <button class="feature-toggle" data-target="#feature1-details">Подробнее</button>
                <div class="feature-details" id="feature1-details">
                    <p>Подробности о функции 1.</p>
                </div>
            </div>
            <div class="feature" id="feature2">
                <h3>Функция 2</h3>
                <p>Описание функции 2.</p>
                <button class="feature-toggle" data-target="#feature2-details">Подробнее</button>
                <div class="feature-details" id="feature2-details">
                    <p>Подробности о функции 2.</p>
                </div>
            </div>
            <!-- Добавьте больше функций по мере необходимости -->
        </div>
    </section>

    <section id="about" class="about">
        <div class="container">
            <h2>О нас</h2>
            <p>Информация о вашей компании или проекте.</p>
        </div>
    </section>

    <section id="contact" class="contact">
        <div class="container">
            <h2>Контакты</h2>
            <form id="contact-form">
                <label for="name">Имя:</label>
                <input type="text" id="name" name="name" required>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                <label for="message">Сообщение:</label>
                <textarea id="message" name="message" required></textarea>
                <button type="submit">Отправить</button>
            </form>
        </div>
    </section>

    <section id="gallery" class="gallery">
        <div class="container">
            <h2>Галерея</h2>
            <div class="gallery-grid">
                <!-- Пример изображений -->
                <div class="gallery-item"><img src="image1.jpg" alt="Изображение 1"></div>
                <div class="gallery-item"><img src="image2.jpg" alt="Изображение 2"></div>
                <div class="gallery-item"><img src="image3.jpg" alt="Изображение 3"></div>
                <!-- Добавьте больше изображений по мере необходимости -->
            </div>
        </div>
    </section>

    <section id="faq" class="faq">
        <div class="container">
            <h2>Часто задаваемые вопросы</h2>
            <div class="faq-item">
                <h3>Вопрос 1</h3>
                <p>Ответ на вопрос 1.</p>
            </div>
            <div class="faq-item">
                <h3>Вопрос 2</h3>
                <p>Ответ на вопрос 2.</p>
            </div>
            <!-- Добавьте больше вопросов и ответов по мере необходимости -->
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2024 Сложный Сайт. Все права защищены.</p>
        </div>
    </footer>

    <script src="scripts.js"></script>
</body>
</html>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    background-color: #f5f5f5;
}

.container {
    width: 80%;
    margin: 0 auto;
}

header {
    background-color: #333;
    color: white;
    padding: 20px 0;
}

header h1 {
    margin: 0;
}

nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

nav ul li {
    display: inline;
    margin-right: 20px;
}

nav ul li a {
    color: white;
    text-decoration: none;
}

.hero {
    background-color: #333;
    color: white;
    padding: 60px 0;
    text-align: center;
}

button {
    padding: 10px 20px;
    border: none;
    background-color: #444;
    color: white;
    cursor: pointer;
}

button:hover {
    background-color: #666;
}

.features {
    padding: 40px 0;
    background-color: #fff;
}

.feature {
    margin-bottom: 20px;
    background-color: #f9f9f9;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.feature-details {
    display: none;
    margin-top: 10px;
    background-color: #eee;
    padding: 10px;
    border-radius: 5px;
}

.about, .contact, .gallery, .faq {
    padding: 40px 0;
}

.gallery-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.gallery-item {
    flex: 1 1 calc(33.333% - 10px);
    box-sizing: border-box;
}

.gallery-item img {
    width: 100%;
    height: auto;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.faq-item {
    margin-bottom: 20px;
    padding: 20px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

footer {
    background-color: #333;
    color: white;
    padding: 20px 0;
    text-align: center;
}
document.addEventListener('DOMContentLoaded', function () {
    const exploreBtn = document.getElementById('explore-btn');
    exploreBtn.addEventListener('click', function () {
        alert('Вы нажали на кнопку Узнать больше!');
    });

    const featureToggles = document.querySelectorAll('.feature-toggle');
    featureToggles.forEach(button => {
        button.addEventListener('click', function () {
            const target = document.querySelector(button.getAttribute('data-target'));
            if (target.style.display === 'block') {
                target.style.display = 'none';
            } else {
                target.style.display = 'block';
            }
        });
    });

    const contactForm = document.getElementById('contact-form');
    contactForm.addEventListener('submit', function (event) {
        event.preventDefault();
        const formData = new FormData(contactForm);
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            message: formData.get('message')
        };
        fetch('/submit-form', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
            alert(result.message);
            contactForm.reset();
        })
        .catch(error => console.error('Ошибка:', error));
    });
});
npm install express body-parser
const express = require('express');
const bodyParser = require('body-parser');
const path = require('path');

const app = express();
const port = 3000;

// Middleware
app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json());
app.use(express.static(path.join(__dirname, 'public')));

// Основные маршруты
app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname, 'public', 'index.html'));
});

// Обработка формы
app.post('/submit-form', (req, res) => {
    const { name, email, message } = req.body;
    console.log(`Получено сообщение от ${name} (${email}): ${message}`);
    res.json({ status: 'success', message: 'Форма отправлена!' });
});

app.listen(port, () => {
    console.log(`Сервер запущен на http://localhost:${port}`);
});
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расширенный Сайт</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Расширенный Сайт</h1>
            <nav>
                <ul>
                    <li><a href="#home">Главная</a></li>
                    <li><a href="#features">Функции</a></li>
                    <li><a href="#about">О нас</a></li>
                    <li><a href="#contact">Контакты</a></li>
                    <li><a href="#gallery">Галерея</a></li>
                    <li><a href="#faq">Часто задаваемые вопросы</a></li>
                    <li><a href="#blog">Блог</a></li>
                    <li><a href="#testimonials">Отзывы</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="home" class="hero">
        <div class="container">
            <h2>Добро пожаловать на наш сайт!</h2>
            <p>Мы предлагаем широкий спектр функций и услуг.</p>
            <button id="explore-btn">Узнать больше</button>
        </div>
    </section>

    <section id="features" class="features">
        <div class="container">
            <h2>Наши функции</h2>
            <div class="feature" id="feature1">
                <h3>Функция 1</h3>
                <p>Описание функции 1.</p>
                <button class="feature-toggle" data-target="#feature1-details">Подробнее</button>
                <div class="feature-details" id="feature1-details">
                    <p>Подробности о функции 1.</p>
                </div>
            </div>
            <div class="feature" id="feature2">
                <h3>Функция 2</h3>
                <p>Описание функции 2.</p>
                <button class="feature-toggle" data-target="#feature2-details">Подробнее</button>
                <div class="feature-details" id="feature2-details">
                    <p>Подробности о функции 2.</p>
                </div>
            </div>
            <!-- Добавьте больше функций по мере необходимости -->
        </div>
    </section>

    <section id="about" class="about">
        <div class="container">
            <h2>О нас</h2>
            <p>Мы — команда профессионалов, стремящихся предложить лучшие решения для наших клиентов.</p>
            <div class="team">
                <div class="team-member">
                    <img src="team1.jpg" alt="Член команды 1">
                    <h3>Имя Члена 1</h3>
                    <p>Роль и краткое описание.</p>
                </div>
                <div class="team-member">
                    <img src="team2.jpg" alt="Член команды 2">
                    <h3>Имя Члена 2</h3>
                    <p>Роль и краткое описание.</p>
                </div>
                <!-- Добавьте больше членов команды по мере необходимости -->
            </div>
        </div>
    </section>

    <section id="contact" class="contact">
        <div class="container">
            <h2>Контакты</h2>
            <form id="contact-form">
                <label for="name">Имя:</label>
                <input type="text" id="name" name="name" required>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                <label for="message">Сообщение:</label>
                <textarea id="message" name="message" required></textarea>
                <button type="submit">Отправить</button>
            </form>
            <div class="contact-info">
                <p><strong>Телефон:</strong> +1234567890</p>
                <p><strong>Email:</strong> info@example.com</p>
                <p><strong>Адрес:</strong> 1234 Main St, City, Country</p>
            </div>
        </div>
    </section>

    <section id="gallery" class="gallery">
        <div class="container">
            <h2>Галерея</h2>
            <div class="gallery-grid">
                <div class="gallery-item"><img src="image1.jpg" alt="Изображение 1"></div>
                <div class="gallery-item"><img src="image2.jpg" alt="Изображение 2"></div>
                <div class="gallery-item"><img src="image3.jpg" alt="Изображение 3"></div>
                <!-- Добавьте больше изображений по мере необходимости -->
            </div>
        </div>
    </section>

    <section id="faq" class="faq">
        <div class="container">
            <h2>Часто задаваемые вопросы</h2>
            <div class="faq-item">
                <h3>Вопрос 1</h3>
                <p>Ответ на вопрос 1.</p>
            </div>
            <div class="faq-item">
                <h3>Вопрос 2</h3>
                <p>Ответ на вопрос 2.</p>
            </div>
            <!-- Добавьте больше вопросов и ответов по мере необходимости -->
        </div>
    </section>

    <section id="blog" class="blog">
        <div class="container">
            <h2>Блог</h2>
            <div class="blog-post">
                <h3>Заголовок поста 1</h3>
                <p>Краткое содержание поста 1.</p>
                <a href="#read-more-1" class="read-more">Читать далее</a>
            </div>
            <div class="blog-post">
                <h3>Заголовок поста 2</h3>
                <p>Краткое содержание поста 2.</p>
                <a href="#read-more-2" class="read-more">Читать далее</a>
            </div>
            <!-- Добавьте больше постов по мере необходимости -->
        </div>
    </section>

    <section id="testimonials" class="testimonials">
        <div class="container">
            <h2>Отзывы</h2>
            <div class="testimonial">
                <p>"Отличный сервис! Рекомендую всем."</p>
                <p><strong>— Клиент 1</strong></p>
            </div>
            <div class="testimonial">
                <p>"Профессиональная команда и высокое качество работы."</p>
                <p><strong>— Клиент 2</strong></p>
            </div>
            <!-- Добавьте больше отзывов по мере необходимости -->
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2024 Расширенный Сайт. Все права защищены.</p>
        </div>
    </footer>

    <script src="scripts.js"></script>
</body>
</html>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    background-color: #f5f5f5;
}

.container {
    width: 80%;
    margin: 0 auto;
}

header {
    background-color: #333;
    color: white;
    padding: 20px 0;
}

header h1 {
    margin: 0;
}

nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

nav ul li {
    display: inline;
    margin-right: 20px;
}

nav ul li a {
    color: white;
    text-decoration: none;
}

.hero {
    background-color: #333;
    color: white;
    padding: 60px 0;
    text-align: center;
}

button {
    padding: 10px 20px;
    border: none;
    background-color: #444;
    color: white;
    cursor: pointer;
}

button:hover {
    background-color: #666;
}

.features {
    padding: 40px 0;
    background-color: #fff;
}

.feature {
    margin-bottom: 20px;
    background-color: #f9f9f9;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.feature-details {
    display: none;
    margin-top: 10px;
    background-color: #eee;
    padding: 10px;
    border-radius: 5px;
}

.about, .contact, .gallery, .faq, .blog, .testimonials {
    padding: 40px 0;
}

.team {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.team-member {
    flex: 1 1 calc(33.333% - 20px);
    box-sizing: border-box;
    text-align: center;
}

.team-member img {
    width: 100%;
    height: auto;
    border-radius: 50%;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.contact-info {
    margin-top: 20px;
}

.gallery-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.gallery-item {
    flex: 1 1 calc(33.333% - 10px);
    box-sizing: border-box;
}

.gallery-item img {
    width: 100%;
    height: auto;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.faq-item {
    margin-bottom: 20px;
    padding: 20px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.blog-post {
    margin-bottom: 20px;
    padding: 20px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.testimonial {
    margin-bottom: 20px;
    padding: 20px;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

footer {
    background-color: #333;
    color: white;
    padding: 20px 0;
    text-align: center;
}
document.addEventListener('DOMContentLoaded', function () {
    const exploreBtn = document.getElementById('explore-btn');
    exploreBtn.addEventListener('click', function () {
        alert('Вы нажали на кнопку Узнать больше!');
    });

    const featureToggles = document.querySelectorAll('.feature-toggle');
    featureToggles.forEach(button => {
        button.addEventListener('click', function () {
            const target = document.querySelector(button.getAttribute('data-target'));
            if (target.style.display === 'block') {
                target.style.display = 'none';
            } else {
                target.style.display = 'block';
            }
        });
    });

    const contactForm = document.getElementById('contact-form');
    contactForm.addEventListener('submit', function (event) {
        event.preventDefault();
        const formData = new FormData(contactForm);
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            message: formData.get('message')
        };
        fetch('/submit-form', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
            alert(result.message);
            contactForm.reset();
        })
        .catch(error => console.error('Ошибка:', error));
    });

    // Анимация прокрутки
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });

    // Модальное окно для блога
    document.querySelectorAll('.read-more').forEach(button => {
        button.addEventListener('click', function (e) {
            e.preventDefault();
            const postId = this.getAttribute('href').substring(1);
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Полный текст поста ${postId}</h2>
                    <p>Здесь будет полный текст поста.</p>
                </div>
            `;
            document.body.appendChild(modal);
            modal.querySelector('.close').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
        });
    });
});
.modal {
    display: flex;
    justify-content: center;
    align-items: center;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
}

.modal-content {
    background-color: #fff;
    padding: 20px;
    border-radius: 5px;
    position: relative;
    max-width: 600px;
    margin: auto;
}

.close {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 24px;
    cursor: pointer;
}
app.get('/post/:id', (req, res) => {
    const postId = req.params.id;
    // Здесь можно получить полный текст поста из базы данных
    res.json({ title: `Полный текст поста ${postId}`, content: 'Здесь будет полный текст поста.' });
});
app.get('/post/:id', (req, res) => {
    const postId = req.params.id;
    // Здесь можно получить полный текст поста из базы данных
    res.json({
        title: `Полный текст поста ${postId}`,
        content: 'Здесь будет полный текст поста.'
    });
});
npm install bcryptjs jsonwebtoken mongoose
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');

const userSchema = new mongoose.Schema({
    username: { type: String, required: true, unique: true },
    password: { type: String, required: true }
});

userSchema.pre('save', async function (next) {
    if (this.isModified('password')) {
        this.password = await bcrypt.hash(this.password, 10);
    }
    next();
});

userSchema.methods.comparePassword = function (password) {
    return bcrypt.compare(password, this.password);
};

module.exports = mongoose.model('User', userSchema);
const express = require('express');
const jwt = require('jsonwebtoken');
const User = require('../models/User');
const router = express.Router();

const SECRET_KEY = 'your_secret_key';

// Регистрация
router.post('/register', async (req, res) => {
    try {
        const { username, password } = req.body;
        const user = new User({ username, password });
        await user.save();
        res.status(201).json({ message: 'Пользователь зарегистрирован!' });
    } catch (error) {
        res.status(400).json({ error: 'Ошибка регистрации' });
    }
});

// Вход
router.post('/login', async (req, res) => {
    try {
        const { username, password } = req.body;
        const user = await User.findOne({ username });
        if (!user || !(await user.comparePassword(password))) {
            return res.status(401).json({ error: 'Неверное имя пользователя или пароль' });
        }
        const token = jwt.sign({ userId: user._id }, SECRET_KEY, { expiresIn: '1h' });
        res.json({ token });
    } catch (error) {
        res.status(400).json({ error: 'Ошибка входа' });
    }
});

module.exports = router;
const jwt = require('jsonwebtoken');
const SECRET_KEY = 'your_secret_key';

module.exports = (req, res, next) => {
    const token = req.headers['authorization'];
    if (!token) {
        return res.status(403).json({ error: 'Нет доступа' });
    }
    jwt.verify(token, SECRET_KEY, (err, decoded) => {
        if (err) {
            return res.status(403).json({ error: 'Неверный токен' });
        }
        req.userId = decoded.userId;
        next();
    });
};
const mongoose = require('mongoose');
const authRoutes = require('./routes/auth');
const authMiddleware = require('./middleware/auth');

// Подключение к базе данных MongoDB
mongoose.connect('mongodb://localhost:27017/yourdbname', { useNewUrlParser: true, useUnifiedTopology: true });

// Использование маршрутов аутентификации
app.use('/auth', authRoutes);

// Пример защищенного маршрута
app.get('/profile', authMiddleware, (req, res) => {
    res.json({ message: 'Профиль пользователя' });
});
const mongoose = require('mongoose');

const postSchema = new mongoose.Schema({
    title: { type: String, required: true },
    content: { type: String, required: true },
    author: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Post', postSchema);
const express = require('express');
const Post = require('../models/Post');
const authMiddleware = require('../middleware/auth');
const router = express.Router();

// Создание поста
router.post('/', authMiddleware, async (req, res) => {
    try {
        const post = new Post({
            ...req.body,
            author: req.userId
        });
        await post.save();
        res.status(201).json(post);
    } catch (error) {
        res.status(400).json({ error: 'Ошибка создания поста' });
    }
});

// Получение всех постов
router.get('/', async (req, res) => {
    try {
        const posts = await Post.find().populate('author', 'username');
        res.json(posts);
    } catch (error) {
        res.status(400).json({ error: 'Ошибка получения постов' });
    }
});

// Получение поста по ID
router.get('/:id', async (req, res) => {
    try {
        const post = await Post.findById(req.params.id).populate('author', 'username');
        if (!post) {
            return res.status(404).json({ error: 'Пост не найден' });
        }
        res.json(post);
    } catch (error) {
        res.status(400).json({ error: 'Ошибка получения поста' });
    }
});

// Обновление поста
router.put('/:id', authMiddleware, async (req, res) => {
    try {
        const post = await Post.findById(req.params.id);
        if (!post) {
            return res.status(404).json({ error: 'Пост
npm install mongoose
module.exports = {
    dbURI: 'mongodb://localhost:27017/mydatabase', // Замените на ваш URI MongoDB
};
const mongoose = require('mongoose');
const config = require('./config');

// Подключение к базе данных
mongoose.connect(config.dbURI, { useNewUrlParser: true, useUnifiedTopology: true });

const db = mongoose.connection;
db.on('error', console.error.bind(console, 'Ошибка подключения к базе данных:'));
db.once('open', () => {
    console.log('Подключение к базе данных успешно');
});
const mongoose = require('mongoose');

const postSchema = new mongoose.Schema({
    title: String,
    content: String,
    author: String,
    createdAt: { type: Date, default: Date.now }
});

const Post = mongoose.model('Post', postSchema);

module.exports = Post;
const Post = require('./models/Post');

// Получение всех постов
app.get('/posts', async (req, res) => {
    try {
        const posts = await Post.find();
        res.json(posts);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения постов' });
    }
});

// Получение одного поста
app.get('/posts/:id', async (req, res) => {
    try {
        const post = await Post.findById(req.params.id);
        if (!post) {
            return res.status(404).json({ error: 'Пост не найден' });
        }
        res.json(post);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения поста' });
    }
});

// Создание нового поста
app.post('/posts', async (req, res) => {
    try {
        const post = new Post(req.body);
        await post.save();
        res.status(201).json(post);
    } catch (error) {
        res.status(400).json({ error: 'Ошибка создания поста' });
    }
});
document.addEventListener('DOMContentLoaded', function () {
    // Загрузка постов блога
    fetch('/posts')
        .then(response => response.json())
        .then(posts => {
            const blogSection = document.querySelector('.blog');
            posts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'blog-post';
                postElement.innerHTML = `
                    <h3>${post.title}</h3>
                    <p>${post.content.substring(0, 100)}...</p>
                    <a href="#" class="read-more" data-id="${post._id}">Читать далее</a>
                `;
                blogSection.appendChild(postElement);
            });

            // Обработка кликов на кнопки "Читать далее"
            document.querySelectorAll('.read-more').forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    const postId = this.getAttribute('data-id');
                    fetch(`/posts/${postId}`)
                        .then(response => response.json())
                        .then(post => {
                            const modal = document.createElement('div');
                            modal.className = 'modal';
                            modal.innerHTML = `
                                <div class="modal-content">
                                    <span class="close">&times;</span>
                                    <h2>${post.title}</h2>
                                    <p>${post.content}</p>
                                </div>
                            `;
                            document.body.appendChild(modal);
                            modal.querySelector('.close').addEventListener('click', () => {
                                document.body.removeChild(modal);
                            });
                        });
                });
            });
        })
        .catch(error => console.error('Ошибка:', error));
});
<section id="create-post" class="create-post">
    <div class="container">
        <h2>Создать новый пост</h2>
        <form id="create-post-form">
            <label for="title">Заголовок:</label>
            <input type="text" id="title" name="title" required>
            <label for="content">Содержание:</label>
            <textarea id="content" name="content" required></textarea>
            <label for="author">Автор:</label>
            <input type="text" id="author" name="author" required>
            <button type="submit">Создать пост</button>
        </form>
    </div>
</section>
document.addEventListener('DOMContentLoaded', function () {
    // Обработка создания поста
    const createPostForm = document.getElementById('create-post-form');
    createPostForm.addEventListener('submit', function (event) {
        event.preventDefault();
        const formData = new FormData(createPostForm);
        const data = {
            title: formData.get('title'),
            content: formData.get('content'),
            author: formData.get('author')
        };
        fetch('/posts', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
            alert('Пост создан успешно!');
            createPostForm.reset();
        })
        .catch(error => console.error('Ошибка:', error));
    });
});
const postSchema = new mongoose.Schema({
    title: String,
    content: String,
    author: String,
    category: String,
    tags: [String],
    createdAt: { type: Date, default: Date.now }
});
// Получение постов с пагинацией и фильтрацией
app.get('/posts', async (req, res) => {
    try {
        const { page = 1, limit = 10, category, tag } = req.query;
        const query = {};
        if (category) query.category = category;
        if (tag) query.tags = tag;

        const posts = await Post.find(query)
            .skip((page - 1) * limit)
            .limit(Number(limit))
            .exec();

        const totalPosts = await Post.countDocuments(query).exec();
        res.json({
            posts,
            totalPages: Math.ceil(totalPosts / limit),
            currentPage: Number(page),
            totalPosts
        });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения постов' });
    }
});
<!-- Фильтры -->
<section id="filters">
    <div class="container">
        <h2>Фильтры</h2>
        <label for="category">Категория:</label>
        <select id="category">
            <option value="">Все</option>
            <option value="tech">Технологии</option>
            <option value="lifestyle">Образ жизни</option>
            <!-- Добавьте больше категорий по мере необходимости -->
        </select>
        <label for="tag">Тег:</label>
        <input type="text" id="tag" placeholder="Введите тег">
        <button id="filter-btn">Применить фильтр</button>
    </div>
</section>

<!-- Пагинация -->
<section id="pagination">
    <div class="container">
        <button id="prev-page">Предыдущая</button>
        <span id="page-info"></span>
        <button id="next-page">Следующая</button>
    </div>
</section>
document.addEventListener('DOMContentLoaded', function () {
    let currentPage = 1;
    const limit = 10;

    function loadPosts(page, category, tag) {
        fetch(`/posts?page=${page}&limit=${limit}&category=${category}&tag=${tag}`)
            .then(response => response.json())
            .then(data => {
                const blogSection = document.querySelector('.blog');
                blogSection.innerHTML = '';
                data.posts.forEach(post => {
                    const postElement = document.createElement('div');
                    postElement.className = 'blog-post';
                    postElement.innerHTML = `
                        <h3>${post.title}</h3>
                        <p>${post.content.substring(0, 100)}...</p>
                        <a href="#" class="read-more" data-id="${post._id}">Читать далее</a>
                    `;
                    blogSection.appendChild(postElement);
                });

                document.getElementById('page-info').textContent = `Страница ${data.currentPage} из ${data.totalPages}`;

                document.getElementById('prev-page').disabled = data.currentPage === 1;
                document.getElementById('next-page').disabled = data.currentPage === data.totalPages;
            })
            .catch(error => console.error('Ошибка:', error));
    }

    document.getElementById('filter-btn').addEventListener('click', function () {
        const category = document.getElementById('category').value;
        const tag = document.getElementById('tag').value;
        loadPosts(1, category, tag);
    });

    document.getElementById('prev-page').addEventListener('click', function () {
        if (currentPage > 1) {
            currentPage--;
            loadPosts(currentPage);
        }
    });

    document.getElementById('next-page').addEventListener('click', function () {
        currentPage++;
        loadPosts(currentPage);
    });

    // Загрузка постов при старте
    loadPosts(currentPage);
});
<section id="search">
    <div class="container">
        <h2>Поиск</h2>
        <input type="text" id="search-input" placeholder="Введите запрос">
        <button id="search-btn">Искать</button>
    </div>
</section>
document.getElementById('search-btn').addEventListener('click', function () {
    const query = document.getElementById('search-input').value;
    fetch(`/search?query=${query}`)
        .then(response => response.json())
        .then(data => {
            const searchResults = document.querySelector('#search-results');
            searchResults.innerHTML = '';
            data.results.forEach(post => {
                const resultElement = document.createElement('div');
                resultElement.className = 'search-result';
                resultElement.innerHTML = `
                    <h3>${post.title}</h3>
                    <p>${post.content.substring(0, 100)}...</p>
                    <a href="#" class="read-more" data-id="${post._id}">Читать далее</a>
                `;
                searchResults.appendChild(resultElement);
            });
        })
        .catch(error => console.error('Ошибка:', error));
});
app.get('/search', async (req, res) => {
    try {
        const query = req.query.query;
        const posts = await Post.find({
            $text: { $search: query }
        });
        res.json({ results: posts });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка поиска' });
    }
});

// Добавление индексов для полнотекстового поиска
postSchema.index({ title: 'text', content: 'text' });
const mongoose = require('mongoose');

const commentSchema = new mongoose.Schema({
    postId: mongoose.Schema.Types.ObjectId,
    author: String,
    content: String,
    createdAt: { type: Date, default: Date.now }
});

const Comment = mongoose.model('Comment', commentSchema);

module.exports = Comment;
const Comment = require('./models/Comment');

// Получение комментариев для поста
app.get('/comments/:postId', async (req, res) => {
    try {
        const comments = await Comment.find({ postId: req.params.postId });
        res.json(comments);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения комментариев' });
    }
});

// Добавление комментария
app.post('/comments', async (req, res) => {
    try {
        const comment = new Comment(req.body);
        await comment.save();
        res.status(201).json(comment);
    } catch (error) {
        res.status(400).json({ error: 'Ошибка создания комментария' });
    }
});
<!-- Форма комментариев -->
<section id="comments">
    <div class="container">
        <h2>Комментарии</h2>
        <form id="comment-form">
            <label for="comment-author">Имя:</label>
            <input type="text" id="comment-author" name="author" required>
            <label for="comment-content">Комментарий:</label>
            <textarea id="comment-content" name="content" required></textarea>
            <button type="submit">Оставить комментарий</button>
        </form>
        <div id="comment-list"></div>
    </div>
</section>
document.addEventListener('DOMContentLoaded', function () {
    // Загрузка и отображение комментариев
    function loadComments(postId) {
        fetch(`/comments/${postId}`)
            .then(response => response.json())
            .then(comments => {
                const commentList = document.getElementById('comment-list');
                commentList.innerHTML = '';
                comments.forEach(comment => {
                    const commentElement = document.createElement('div');
                    commentElement.className = 'comment';
                    commentElement.innerHTML = `
                        <p><strong>${comment.author}</strong>: ${comment.content}</p>
                    `;
                    commentList.appendChild(commentElement);
                });
            })
            .catch(error => console.error('Ошибка:', error));
    }

    // Обработка формы комментариев
    document.getElementById('comment-form').addEventListener('submit', function (event) {
        event.preventDefault();
        const formData = new FormData(this);
        const data = {
            postId: currentPostId, // текущий пост
            author: formData.get('author'),
            content: formData.get('content')
        };
        fetch('/comments', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
            alert('Комментарий добавлен');
            loadComments(currentPostId); // Перезагрузить комментарии
        })
        .catch(error => console.error('Ошибка:', error));
    });
});
npm install aos
<head>
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css">
</head>
<body>
    <!-- Ваш контент -->
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
</body>
<div data-aos="fade-up">
    <h2>Заголовок с анимацией</h2>
    <p>Описание...</p>
</div>
npm install video.js
<head>
    <link href="https://vjs.zencdn.net/7.14.3/video-js.css" rel="stylesheet">
</head>
<body>
    <!-- Видеоплеер -->
    <video id="my-video" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264">
        <source src="your-video.mp4" type="video/mp4">
    </video>
    <script src="https://vjs.zencdn.net/7.14.3/video.min.js"></script>
    <script>
        var player = videojs('my-video');
    </script>
</body>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Видеоплеер</title>
    <link href="https://vjs.zencdn.net/7.14.3/video-js.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>Потоковое видео</h1>
        <video id="video-player" class="video-js vjs-default-skin" controls preload="auto" width="640" height="360">
            <source src="your-streaming-url" type="application/x-mpegURL">
        </video>
    </div>
    <script src="https://vjs.zencdn.net/7.14.3/video.min.js"></script>
    <script>
        var player = videojs('video-player');
    </script>
</body>
</html>
npm install bcryptjs jsonwebtoken express-session
const mongoose = require('mongoose');
const bcrypt = require('bcryptjs');

const userSchema = new mongoose.Schema({
    username: { type: String, unique: true, required: true },
    password: { type: String, required: true }
});

userSchema.pre('save', async function (next) {
    if (!this.isModified('password')) return next();
    const hashedPassword = await bcrypt.hash(this.password, 10);
    this.password = hashedPassword;
    next();
});

userSchema.methods.comparePassword = function (candidatePassword) {
    return bcrypt.compare(candidatePassword, this.password);
};

const User = mongoose.model('User', userSchema);
module.exports = User;
const User = require('./models/User');
const session = require('express-session');
const jwt = require('jsonwebtoken');

app.use(session({
    secret: 'your-secret-key',
    resave: false,
    saveUninitialized: true
}));

app.post('/register', async (req, res) => {
    try {
        const { username, password } = req.body;
        const user = new User({ username, password });
        await user.save();
        res.status(201).json({ message: 'Пользователь зарегистрирован' });
    } catch (error) {
        res.status(400).json({ error: 'Ошибка регистрации' });
    }
});

app.post('/login', async (req, res) => {
    try {
        const { username, password } = req.body;
        const user = await User.findOne({ username });
        if (!user || !(await user.comparePassword(password))) {
            return res.status(401).json({ error: 'Неверное имя пользователя или пароль' });
        }
        req.session.userId = user._id;
        const token = jwt.sign({ id: user._id }, 'your-jwt-secret', { expiresIn: '1h' });
        res.json({ token });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка входа' });
    }
});

app.get('/logout', (req, res) => {
    req.session.destroy(err => {
        if (err) return res.status(500).json({ error: 'Ошибка выхода' });
        res.json({ message: 'Выход выполнен' });
    });
});
const jwt = require('jsonwebtoken');

function authenticateToken(req, res, next) {
    const token = req.headers['authorization'] && req.headers['authorization'].split(' ')[1];
    if (token == null) return res.sendStatus(401);
    
    jwt.verify(token, 'your-jwt-secret', (err, user) => {
        if (err) return res.sendStatus(403);
        req.user = user;
        next();
    });
}
app.get('/protected', authenticateToken, (req, res) => {
    res.json({ message: 'Этот маршрут защищен' });
});
npm install socket.io
const http = require('http');
const socketIo = require('socket.io');

const server = http.createServer(app);
const io = socketIo(server);

io.on('connection', (socket) => {
    console.log('Новый пользователь подключился');
    
    socket.on('new-comment', (data) => {
        io.emit('new-comment', data);
    });

    socket.on('disconnect', () => {
        console.log('Пользователь отключился');
    });
});

server.listen(3000, () => {
    console.log('Сервер запущен на порту 3000');
});
const socket = io();

document.getElementById('comment-form').addEventListener('submit', function (event) {
    event.preventDefault();
    const formData = new FormData(this);
    const data = {
        postId: currentPostId,
        author: formData.get('author'),
        content: formData.get('content')
    };
    fetch('/comments', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {
        socket.emit('new-comment', data);
    })
    .catch(error => console.error('Ошибка:', error));
});

socket.on('new-comment', function (comment) {
    const commentList = document.getElementById('comment-list');
    const commentElement = document.createElement('div');
    commentElement.className = 'comment';
    commentElement.innerHTML = `
        <p><strong>${comment.author}</strong>: ${comment.content}</p>
    `;
    commentList.appendChild(commentElement);
});
<head>
    <!-- Ваши другие теги -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR_TRACKING_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'YOUR_TRACKING_ID');
    </script>
</head>
npm install @sentry/node
const Sentry = require('@sentry/node');

Sentry.init({ dsn: 'YOUR_SENTRY_DSN' });

app.use(Sentry.Handlers.requestHandler());
app.use(Sentry.Handlers.errorHandler());
const chatMessages = []; // Хранилище сообщений чата

io.on('connection', (socket) => {
    console.log('Пользователь подключился к чату');
    
    // Отправка старых сообщений новым пользователям
    socket.emit('chat-history', chatMessages);
    
    // Обработка новых сообщений
    socket.on('chat-message', (msg) => {
        chatMessages.push(msg);
        io.emit('chat-message', msg);
    });

    socket.on('disconnect', () => {
        console.log('Пользователь отключился от чата');
    });
});
<section id="chat">
    <div class="container">
        <h2>Чат</h2>
        <div id="chat-messages" class="chat-messages"></div>
        <form id="chat-form">
            <input type="text" id="chat-input" placeholder="Введите сообщение" required>
            <button type="submit">Отправить</button>
        </form>
    </div>
</section>
const socket = io();

document.addEventListener('DOMContentLoaded', function () {
    const chatForm = document.getElementById('chat-form');
    const chatMessages = document.getElementById('chat-messages');
    
    chatForm.addEventListener('submit', function (event) {
        event.preventDefault();
        const input = document.getElementById('chat-input');
        const message = input.value;
        socket.emit('chat-message', { text: message, timestamp: new Date().toISOString() });
        input.value = '';
    });

    socket.on('chat-message', function (msg) {
        const messageElement = document.createElement('div');
        messageElement.className = 'chat-message';
        messageElement.innerHTML = `
            <p>${msg.timestamp}: ${msg.text}</p>
        `;
        chatMessages.appendChild(messageElement);
        chatMessages.scrollTop = chatMessages.scrollHeight; // Прокрутка к последнему сообщению
    });

    socket.on('chat-history', function (messages) {
        messages.forEach(msg => {
            const messageElement = document.createElement('div');
            messageElement.className = 'chat-message';
            messageElement.innerHTML = `
                <p>${msg.timestamp}: ${msg.text}</p>
            `;
            chatMessages.appendChild(messageElement);
        });
        chatMessages.scrollTop = chatMessages.scrollHeight; // Прокрутка к последнему сообщению
    });
});
#chat {
    margin: 20px auto;
    max-width: 800px;
}

.chat-messages {
    border: 1px solid #ddd;
    height: 400px;
    overflow-y: scroll;
    padding: 10px;
    background: #f9f9f9;
}

.chat-message {
    margin-bottom: 10px;
}

#chat-form {
    display: flex;
    margin-top: 10px;
}

#chat-input {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
}

#chat-form button {
    padding: 10px;
    border: 1px solid #ddd;
    background-color: #007bff;
    color: #fff;
    border-radius: 3px;
}
const mongoose = require('mongoose');

const ratingSchema = new mongoose.Schema({
    postId: mongoose.Schema.Types.ObjectId,
    userId: mongoose.Schema.Types.ObjectId,
    rating: Number
});

const Rating = mongoose.model('Rating', ratingSchema);
module.exports = Rating;
app.post('/rate', async (req, res) => {
    try {
        const { postId, userId, rating } = req.body;
        const existingRating = await Rating.findOne({ postId, userId });
        
        if (existingRating) {
            existingRating.rating = rating;
            await existingRating.save();
        } else {
            const newRating = new Rating({ postId, userId, rating });
            await newRating.save();
        }

        const averageRating = await Rating.aggregate([
            { $match: { postId: mongoose.Types.ObjectId(postId) } },
            { $group: { _id: '$postId', averageRating: { $avg: '$rating' } } }
        ]);

        res.json({ averageRating: averageRating[0]?.averageRating || 0 });
    } catch (error) {
        res.status(400).json({ error: 'Ошибка оценки поста' });
    }
});
<!-- Рейтинг поста -->
<section id="rating">
    <div class="container">
        <h2>Оцените этот пост</h2>
        <form id="rating-form">
            <input type="hidden" id="post-id" value="POST_ID">
            <label for="rating">Ваша оценка:</label>
            <select id="rating" required>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
            <button type="submit">Оценить</button>
        </form>
        <p id="average-rating">Средний рейтинг: 0</p>
    </div>
</section>
document.addEventListener('DOMContentLoaded', function () {
    const ratingForm = document.getElementById('rating-form');
    const postId = document.getElementById('post-id').value;
    
    ratingForm.addEventListener('submit', function (event) {
        event.preventDefault();
        const rating = document.getElementById('rating').value;
        fetch('/rate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ postId, userId: currentUserId, rating })
        })
        .then(response => response.json())
        .then(data => {
            document.getElementById('average-rating').textContent = `Средний рейтинг: ${data.averageRating.toFixed(1)}`;
        })
        .catch(error => console.error('Ошибка:', error));
    });
});
const mongoose = require('mongoose');

const subscriptionSchema = new mongoose.Schema({
    postId: mongoose.Schema.Types.ObjectId,
    userId: mongoose.Schema.Types.ObjectId
});

const Subscription = mongoose.model('Subscription', subscriptionSchema);
module.exports = Subscription;
app.post('/subscribe', async (req, res) => {
    try {
        const { postId, userId } = req.body;
        const subscription = new Subscription({ postId, userId });
        await subscription.save();
        res.status(201).json({ message: 'Подписка оформлена' });
    } catch (error) {
        res.status(400).json({ error: 'Ошибка оформления подписки' });
    }
});

app.post('/unsubscribe', async (req, res) => {
    try {
        const { postId, userId } = req.body;
        await Subscription.deleteOne({ postId, userId });
        res.json({ message: 'Подписка отменена' });
    } catch (error) {
        res.status(400).json({ error: 'Ошибка отмены подписки' });
    }
});
const Subscription = require('./models/Subscription');

io.on('connection', (socket) => {
    console.log('Пользователь подключился');

    socket.on('new-comment', async (data) => {
        const subscriptions = await Subscription.find({ postId: data.postId });
        subscriptions.forEach(subscription => {
            io.to(subscription.userId.toString()).emit('notification', { message: 'Новый комментарий на пост' });
        });
    });

    socket.on('subscribe', (userId) => {
        socket.join(userId);
    });

    socket.on('disconnect', () => {
        console.log('Пользователь отключился');
    });
});
const socket = io();

document.addEventListener('DOMContentLoaded', function () {
    socket.emit('subscribe', currentUserId);
    
    // Обработка уведомлений
    socket.on('notification', function (data) {
        alert(data.message);
    });
});
app.get('/search', async (req, res) => {
    try {
        const query = req.query.q;
        const posts = await Post.find({ title: new RegExp(query, 'i') });
        res.json(posts);
    } catch (error) {
        res.status(400).json({ error: 'Ошибка поиска' });
    }
});
<section id="search">
    <div class="container">
        <h2>Поиск</h2>
        <form id="search-form">
            <input type="text" id="search-input" placeholder="Введите запрос" required>
            <button type="submit">Искать</button>
        </form>
        <div id="search-results"></div>
    </div>
</section>
document.addEventListener('DOMContentLoaded', function () {
    const searchForm = document.getElementById('search-form');
    const searchResults = document.getElementById('search-results');

    searchForm.addEventListener('submit', function (event) {
        event.preventDefault();
        const query = document.getElementById('search-input').value;
        fetch(`/search?q=${encodeURIComponent(query)}`)
            .then(response => response.json())
            .then(posts => {
                searchResults.innerHTML = '';
                posts.forEach(post => {
                    const postElement = document.createElement('div');
                    postElement.className = 'search-result';
                    postElement.innerHTML = `
                        <h3><a href="/post/${post._id}">${post.title}</a></h3>
                        <p>${post.excerpt}</p>
                    `;
                    searchResults.appendChild(postElement);
                });
            })
            .catch(error => console.error('Ошибка:', error));
    });
});
/* Основные стили */
body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 0;
}

.container {
    width: 90%;
    margin: auto;
    overflow: hidden;
}

/* Адаптивные стили */
@media (max-width: 768px) {
    .container {
        width: 100%;
        padding: 0 10px;
    }

    #chat {
        font-size: 14px;
    }

    #rating-form {
        flex-direction: column;
    }

    #rating-form button {
        margin-top: 10px;
    }
}

@media (max-width: 480px) {
    #chat {
        font-size: 12px;
    }

    #chat-input {
        font-size: 14px;
    }
}
npm install lightbox2
<head>
    <link href="https://cdn.jsdelivr.net/npm/lightbox2@2.11.3/dist/css/lightbox.min.css" rel="stylesheet">
</head>
<body>
    <!-- Пример использования Lightbox -->
    <a href="large-image.jpg" data-lightbox="gallery">
        <img src="thumbnail.jpg" alt="Thumbnail">
    </a>
    <script src="https://cdn.jsdelivr.net/npm/lightbox2@2.11.3/dist/js/lightbox-plus-jquery.min.js"></script>
</body>
<audio controls>
    <source src="audio-file.mp3" type="audio/mp3">
    Ваш браузер не поддерживает элемент audio.
</audio>
const mongoose = require('mongoose');

const profileSchema = new mongoose.Schema({
    userId: mongoose.Schema.Types.ObjectId,
    avatar: String,
    bio: String,
    website: String
});

const Profile = mongoose.model('Profile', profileSchema);
module.exports = Profile;
const Profile = require('./models/Profile');
const multer = require('multer');
const path = require('path');

const upload = multer({
    dest: 'uploads/',
    limits: { fileSize: 1000000 } // 1MB
});

app.post('/profile/update', upload.single('avatar'), async (req, res) => {
    try {
        const { userId, bio, website } = req.body;
        const profile = await Profile.findOne({ userId });
        if (profile) {
            profile.bio = bio;
            profile.website = website;
            if (req.file) {
                profile.avatar = req.file.filename;
            }
            await profile.save();
        } else {
            const newProfile = new Profile({
                userId,
                bio,
                website,
                avatar: req.file ? req.file.filename : ''
            });
            await newProfile.save();
        }
        res.json({ message: 'Профиль обновлен' });
    } catch (error) {
        res.status(400).json({ error: 'Ошибка обновления профиля' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль</title>
</head>
<body>
    <h1>Настройки профиля</h1>
    <form id="profile-form" enctype="multipart/form-data">
        <label for="avatar">Аватар:</label>
        <input type="file" id="avatar" name="avatar">
        <label for="bio">Биография:</label>
        <textarea id="bio" name="bio"></textarea>
        <label for="website">Сайт:</label>
        <input type="url" id="website" name="website">
        <button type="submit">Сохранить</button>
    </form>
    <script>
        document.getElementById('profile-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const formData = new FormData(this);
            fetch('/profile/update', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
npm install passport passport-google-oauth20 passport-facebook express-session
const passport = require('passport');
const GoogleStrategy = require('passport-google-oauth20').Strategy;
const FacebookStrategy = require('passport-facebook').Strategy;
const User = require('./models/User');

// Настройка Passport
passport.use(new GoogleStrategy({
    clientID: 'YOUR_GOOGLE_CLIENT_ID',
    clientSecret: 'YOUR_GOOGLE_CLIENT_SECRET',
    callbackURL: '/auth/google/callback'
}, async (accessToken, refreshToken, profile, done) => {
    try {
        let user = await User.findOne({ googleId: profile.id });
        if (!user) {
            user = new User({ googleId: profile.id, username: profile.displayName });
            await user.save();
        }
        done(null, user);
    } catch (error) {
        done(error, null);
    }
}));

passport.use(new FacebookStrategy({
    clientID: 'YOUR_FACEBOOK_CLIENT_ID',
    clientSecret: 'YOUR_FACEBOOK_CLIENT_SECRET',
    callbackURL: '/auth/facebook/callback'
}, async (accessToken, refreshToken, profile, done) => {
    try {
        let user = await User.findOne({ facebookId: profile.id });
        if (!user) {
            user = new User({ facebookId: profile.id, username: profile.displayName });
            await user.save();
        }
        done(null, user);
    } catch (error) {
        done(error, null);
    }
}));

passport.serializeUser((user, done) => {
    done(null, user.id);
});

passport.deserializeUser(async (id, done) => {
    const user = await User.findById(id);
    done(null, user);
});
app.get('/auth/google', passport.authenticate('google', { scope: ['profile'] }));

app.get('/auth/google/callback', passport.authenticate('google'), (req, res) => {
    res.redirect('/');
});

app.get('/auth/facebook', passport.authenticate('facebook', { scope: ['profile'] }));

app.get('/auth/facebook/callback', passport.authenticate('facebook'), (req, res) => {
    res.redirect('/');
});
<a href="/auth/google">Войти через Google</a>
<a href="/auth/facebook">Войти через Facebook</a>
npm install i18next i18next-express-middleware
const i18next = require('i18next');
const i18nextMiddleware = require('i18next-express-middleware');
const Backend = require('i18next-fs-backend');

i18next
    .use(Backend)
    .use(i18nextMiddleware.LanguageDetector)
    .init({
        fallbackLng: 'en',
        preload: ['en', 'es'],
        ns: ['translations'],
        defaultNS: 'translations',
        backend: {
            loadPath: './locales/{{lng}}/{{ns}}.json'
        }
    });

app.use(i18nextMiddleware.handle(i18next));
// locales/en/translation.json
{
    "welcome": "Welcome",
    "profile": "Profile"
}
// locales/es/translation.json
{
    "welcome": "Bienvenido",
    "profile": "Perfil"
}
fetch(`/profile/update?lng=${navigator.language}`)
    .then(response => response.json())
    .then(data => {
        document.getElementById('welcome-message').textContent = data.welcome;
    });
npm install sharp
const sharp = require('sharp');

app.post('/upload', upload.single('file'), async (req, res) => {
    try {
        if (req.file) {
            const filePath = path.join(__dirname, 'uploads', req.file.filename);
            await sharp(filePath)
                .resize(800, 600) // Пример изменения размера
                .toFile(`${filePath}-optimized`);
            res.json({ message: 'Файл загружен и обработан' });
        } else {
            res.status(400).json({ error: 'Файл не найден' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка обработки файла' });
    }
});
<head>
    <!-- Другие теги -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=YOUR_GA_TRACKING_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'YOUR_GA_TRACKING_ID');
    </script>
</head>
// Вызов функции отслеживания кликов по кнопкам
document.querySelectorAll('button').forEach(button => {
    button.addEventListener('click', () => {
        gtag('event', 'click', {
            'event_category': 'button',
            'event_label': button.innerText
        });
    });
});
const fetch = require('node-fetch');

async function getWeather(location) {
    const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${location.latitude}&longitude=${location.longitude}&hourly=temperature_2m`);
    const data = await response.json();
    return data;
}

module.exports = { getWeather };
const { getWeather } = require('./weather');

app.get('/weather', async (req, res) => {
    const location = { latitude: 35.6895, longitude: 139.6917 }; // Пример координат (Токио)
    try {
        const weatherData = await getWeather(location);
        res.json(weatherData);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения данных о погоде' });
    }
});
<section id="weather">
    <div class="container">
        <h2>Погода</h2>
        <div id="weather-info">Загрузка...</div>
    </div>
    <script>
        fetch('/weather')
            .then(response => response.json())
            .then(data => {
                document.getElementById('weather-info').textContent = `Температура: ${data.hourly.temperature_2m[0]}°C`;
            })
            .catch(error => console.error('Ошибка:', error));
    </script>
</section>
const mongoose = require('mongoose');

const recommendationSchema = new mongoose.Schema({
    userId: mongoose.Schema.Types.ObjectId,
    recommendedItems: [mongoose.Schema.Types.ObjectId]
});

const Recommendation = mongoose.model('Recommendation', recommendationSchema);
module.exports = Recommendation;
app.get('/recommendations/:userId', async (req, res) => {
    try {
        const { userId } = req.params;
        const recommendation = await Recommendation.findOne({ userId });
        if (!recommendation) {
            return res.status(404).json({ error: 'Рекомендации не найдены' });
        }
        res.json(recommendation.recommendedItems);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения рекомендаций' });
    }
});
<section id="recommendations">
    <div class="container">
        <h2>Рекомендации для вас</h2>
        <div id="recommendations-list"></div>
    </div>
    <script>
        fetch('/recommendations/USER_ID')
            .then(response => response.json())
            .then(items => {
                const recommendationsList = document.getElementById('recommendations-list');
                recommendationsList.innerHTML = '';
                items.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'recommendation-item';
                    itemElement.innerHTML = `<a href="/item/${item}">Рекомендованный элемент ${item}</a>`;
                    recommendationsList.appendChild(itemElement);
                });
            })
            .catch(error => console.error('Ошибка:', error));
    </script>
</section>
npm install admin-bro @admin-bro/express @admin-bro/mongoose
const AdminBro = require('admin-bro');
const AdminBroExpress = require('@admin-bro/express');
const AdminBroMongoose = require('@admin-bro/mongoose');
const mongoose = require('mongoose');
const User = require('./models/User'); // Импортируем модели

AdminBro.registerAdapter(AdminBroMongoose);

const adminBro = new AdminBro({
    databases: [mongoose],
    rootPath: '/admin',
    resources: [User] // Добавьте другие модели, которые вы хотите администрировать
});

const router = AdminBroExpress.buildRouter(adminBro);
app.use(adminBro.options.rootPath, router);
app.use(express.static('public', {
    maxAge: '1d'
}));
npm install compression
const compression = require('compression');
app.use(compression());
npm install csurf
const csrf = require('csurf');
const csrfProtection = csrf({ cookie: true });

app.use(csrfProtection);

app.use((req, res, next) => {
    res.locals.csrfToken = req.csrfToken();
    next();
});
npm install cors
const cors = require('cors');

const corsOptions = {
    origin: 'https://yourdomain.com',
    methods: ['GET', 'POST'],
    allowedHeaders: ['Content-Type']
};

app.use(cors(corsOptions));
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация</title>
</head>
<body>
    <h1>Регистрация</h1>
    <form id="register-form">
        <label for="username">Имя пользователя:</label>
        <input type="text" id="username" name="username" required>
        <label for="password">Пароль:</label>
        <input type="password" id="password" name="password" required>
        <button type="submit">Регистрация</button>
    </form>
    <script>
        document.getElementById('register-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            fetch('/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/login';
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Вход</title>
</head>
<body>
    <h1>Вход</h1>
    <form id="login-form">
        <label for="username">Имя пользователя:</label>
        <input type="text" id="username" name="username" required>
        <label for="password">Пароль:</label>
        <input type="password" id="password" name="password" required>
        <button type="submit">Войти</button>
    </form>
    <script>
        document.getElementById('login-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            fetch('/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/';
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
const bcrypt = require('bcrypt');
const jwt = require('jsonwebtoken');

app.post('/register', async (req, res) => {
    try {
        const { username, password } = req.body;
        const hashedPassword = await bcrypt.hash(password, 10);
        const user = new User({ username, password: hashedPassword });
        await user.save();
        res.json({ success: true });
    } catch (error) {
        res.status(400).json({ success: false, message: 'Ошибка регистрации' });
    }
});

app.post('/login', async (req, res) => {
    try {
        const { username, password } = req.body;
        const user = await User.findOne({ username });
        if (!user || !(await bcrypt.compare(password, user.password))) {
            return res.status(401).json({ success: false, message: 'Неверные учетные данные' });
        }
        const token = jwt.sign({ userId: user._id }, 'SECRET_KEY');
        res.json({ success: true, token });
    } catch (error) {
        res.status(500).json({ success: false, message: 'Ошибка входа' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Создать пост</title>
</head>
<body>
    <h1>Создать пост</h1>
    <form id="create-post-form">
        <label for="title">Название:</label>
        <input type="text" id="title" name="title" required>
        <label for="content">Содержимое:</label>
        <textarea id="content" name="content" required></textarea>
        <button type="submit">Создать</button>
    </form>
    <script>
        document.getElementById('create-post-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;

            fetch('/posts', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ title, content })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/';
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактировать пост</title>
</head>
<body>
    <h1>Редактировать пост</h1>
    <form id="edit-post-form">
        <label for="title">Название:</label>
        <input type="text" id="title" name="title" required>
        <label for="content">Содержимое:</label>
        <textarea id="content" name="content" required></textarea>
        <button type="submit">Сохранить</button>
    </form>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const postId = new URLSearchParams(window.location.search).get('id');
            fetch(`/posts/${postId}`)
                .then(response => response.json())
                .then(post => {
                    document.getElementById('title').value = post.title;
                    document.getElementById('content').value = post.content;
                });
        });

        document.getElementById('edit-post-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const postId = new URLSearchParams(window.location.search).get('id');
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;

            fetch(`/posts/${postId}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ title, content })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/';
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
app.post('/posts', async (req, res) => {
    try {
        const { title, content } = req.body;
        const post = new Post({ title, content });
        await post.save();
        res.json({ success: true });
    } catch (error) {
        res.status(400).json({ success: false, message: 'Ошибка создания поста' });
    }
});

app.get('/posts/:id', async (req, res) => {
    try {
        const post = await Post.findById(req.params.id);
        if (!post) {
            return res.status(404).json({ message: 'Пост не найден' });
        }
        res.json(post);
    } catch (error) {
        res.status(500).json({ message: 'Ошибка получения поста' });
    }
});

app.put('/posts/:id', async (req, res) => {
    try {
        const { title, content } = req.body;
        await Post.findByIdAndUpdate(req.params.id, { title, content });
        res.json({ success: true });
    } catch (error) {
        res.status(400).json({ success: false, message: 'Ошибка обновления поста' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Комментарии</title>
</head>
<body>
    <h1>Комментарии</h1>
    <div id="comments-list"></div>
    <form id="comment-form">
        <textarea id="comment" name="comment" required></textarea>
        <button type="submit">Оставить комментарий</button>
    </form>
    <script>
        const postId = new URLSearchParams(window.location.search).get('postId');
        
        fetch(`/comments/${postId}`)
            .then(response => response.json())
            .then(comments => {
                const commentsList = document.getElementById('comments-list');
                commentsList.innerHTML = '';
                comments.forEach(comment => {
                    const commentElement = document.createElement('div');
                    commentElement.textContent = comment.content;
                    commentsList.appendChild(commentElement);
                });
            })
            .catch(error => console.error('Ошибка:', error));

        document.getElementById('comment-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const content = document.getElementById('comment').value;

            fetch(`/comments/${postId}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ content })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.reload();
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
app.get('/comments/:postId', async (req, res) => {
    try {
        const comments = await Comment.find({ postId: req.params.postId });
        res.json(comments);
    } catch (error) {
        res.status(500).json({ message: 'Ошибка получения комментариев' });
    }
});

app.post('/comments/:postId', async (req, res) => {
    try {
        const { content } = req.body;
        const comment = new Comment({ postId: req.params.postId, content });
        await comment.save();
        res.json({ success: true });
    } catch (error) {
        res.status(400).json({ success: false, message: 'Ошибка добавления комментария' });
    }
});
/* Основные стили для сайта */

body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 0;
    color: #333;
    background: #f4f4f4;
}

header {
    background: #333;
    color: #fff;
    padding: 10px 0;
    text-align: center;
}

header h1 {
    margin: 0;
}

nav {
    margin-top: 10px;
}

nav a {
    color: #fff;
    text-decoration: none;
    margin: 0 10px;
}

.container {
    width: 80%;
    margin: 0 auto;
    overflow: hidden;
}

section {
    margin: 20px 0;
}

button {
    background: #333;
    color: #fff;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 5px;
}

button:hover {
    background: #555;
}

textarea {
    width: 100%;
    height: 100px;
    margin: 10px 0;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

form {
    margin: 20px 0;
}
@media (max-width: 768px) {
    .container {
        width: 95%;
    }

    nav a {
        display: block;
        margin: 10px 0;
    }
}
<form id="search-form">
    <input type="text" id="search-query" placeholder="Поиск постов..." required>
    <button type="submit">Искать</button>
</form>
app.get('/search', async (req, res) => {
    try {
        const query = req.query.q;
        const posts = await Post.find({ title: new RegExp(query, 'i') });
        res.json(posts);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка поиска постов' });
    }
});
document.getElementById('search-form').addEventListener('submit', function (event) {
    event.preventDefault();
    const query = document.getElementById('search-query').value;

    fetch(`/search?q=${query}`)
        .then(response => response.json())
        .then(posts => {
            const resultsContainer = document.getElementById('search-results');
            resultsContainer.innerHTML = '';
            posts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'post-item';
                postElement.innerHTML = `<a href="/post/${post._id}">${post.title}</a>`;
                resultsContainer.appendChild(postElement);
            });
        })
        .catch(error => console.error('Ошибка:', error));
});
<form id="filter-form">
    <label for="category">Категория:</label>
    <select id="category" name="category">
        <option value="">Все</option>
        <option value="category1">Категория 1</option>
        <option value="category2">Категория 2</option>
    </select>
    <button type="submit">Фильтровать</button>
</form>
app.get('/filter', async (req, res) => {
    try {
        const category = req.query.category;
        const filter = category ? { category } : {};
        const posts = await Post.find(filter);
        res.json(posts);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка фильтрации постов' });
    }
});
document.getElementById('filter-form').addEventListener('submit', function (event) {
    event.preventDefault();
    const category = document.getElementById('category').value;

    fetch(`/filter?category=${category}`)
        .then(response => response.json())
        .then(posts => {
            const resultsContainer = document.getElementById('filter-results');
            resultsContainer.innerHTML = '';
            posts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'post-item';
                postElement.innerHTML = `<a href="/post/${post._id}">${post.title}</a>`;
                resultsContainer.appendChild(postElement);
            });
        })
        .catch(error => console.error('Ошибка:', error));
});
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Описание вашего сайта">
    <meta name="keywords" content="ключевые, слова, вашего, сайта">
    <meta name="author" content="Ваше имя">
    <title>Название вашего сайта</title>
</head>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="<%= post.description %>">
    <meta name="keywords" content="<%= post.keywords %>">
    <meta name="author" content="Автор поста">
    <title><%= post.title %></title>
</head>
<div class="social-share">
    <a href="https://twitter.com/intent/tweet?text=<%= post.title %> <%= post.url %>" target="_blank">Твитнуть</a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=<%= post.url %>" target="_blank">Поделиться в Facebook</a>
</div>
npm install socket.io
const http = require('http');
const socketIo = require('socket.io');

const server = http.createServer(app);
const io = socketIo(server);

io.on('connection', (socket) => {
    console.log('Новый пользователь подключился');
    
    // Отправка уведомлений
    socket.emit('notification', { message: 'Добро пожаловать!' });

    // Обработка отключения
    socket.on('disconnect', () => {
        console.log('Пользователь отключился');
    });
});

server.listen(3000, () => {
    console.log('Сервер запущен на порту 3000');
});
<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io();

    socket.on('notification', function (data) {
        alert(data.message);
    });
</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Детали поста</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Детали поста</h1>
        <nav>
            <a href="/">Главная</a>
            <a href="/create-post.html">Создать пост</a>
        </nav>
    </header>

    <div class="container">
        <article id="post-content">
            <!-- Содержимое поста -->
        </article>

        <section id="reviews">
            <h2>Отзывы</h2>
            <form id="review-form">
                <label for="rating">Оценка (1-5):</label>
                <input type="number" id="rating" name="rating" min="1" max="5" required>
                <label for="review">Отзыв:</label>
                <textarea id="review" name="review" required></textarea>
                <button type="submit">Отправить отзыв</button>
            </form>
            <div id="review-list"></div>
        </section>
    </div>

    <script>
        const postId = new URLSearchParams(window.location.search).get('id');

        document.addEventListener('DOMContentLoaded', function () {
            // Загрузка содержимого поста и отзывов
            fetch(`/posts/${postId}`)
                .then(response => response.json())
                .then(post => {
                    document.getElementById('post-content').innerHTML = `
                        <h2>${post.title}</h2>
                        <p>${post.content}</p>
                    `;
                });

            fetch(`/reviews/${postId}`)
                .then(response => response.json())
                .then(reviews => {
                    const reviewList = document.getElementById('review-list');
                    reviewList.innerHTML = '';
                    reviews.forEach(review => {
                        const reviewElement = document.createElement('div');
                        reviewElement.className = 'review-item';
                        reviewElement.innerHTML = `
                            <p><strong>Оценка:</strong> ${review.rating}</p>
                            <p>${review.review}</p>
                        `;
                        reviewList.appendChild(reviewElement);
                    });
                });
        });

        document.getElementById('review-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const rating = document.getElementById('rating').value;
            const review = document.getElementById('review').value;

            fetch(`/reviews/${postId}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ rating, review })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.reload();
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
const Review = require('./models/Review'); // Добавьте модель отзыва

app.get('/reviews/:postId', async (req, res) => {
    try {
        const reviews = await Review.find({ postId: req.params.postId });
        res.json(reviews);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения отзывов' });
    }
});

app.post('/reviews/:postId', async (req, res) => {
    try {
        const { rating, review } = req.body;
        const newReview = new Review({ postId: req.params.postId, rating, review });
        await newReview.save();
        res.json({ success: true });
    } catch (error) {
        res.status(400).json({ success: false, message: 'Ошибка добавления отзыва' });
    }
});
const mongoose = require('mongoose');

const reviewSchema = new mongoose.Schema({
    postId: { type: mongoose.Schema.Types.ObjectId, ref: 'Post', required: true },
    rating: { type: Number, min: 1, max: 5, required: true },
    review: { type: String, required: true }
});

module.exports = mongoose.model('Review', reviewSchema);
<section id="subscription">
    <h2>Подписка на обновления</h2>
    <form id="subscription-form">
        <label for="email">Ваш email:</label>
        <input type="email" id="email" name="email" required>
        <button type="submit">Подписаться</button>
    </form>
</section>
const Subscription = require('./models/Subscription'); // Добавьте модель подписки

app.post('/subscribe', async (req, res) => {
    try {
        const { email, postId } = req.body;
        const newSubscription = new Subscription({ email, postId });
        await newSubscription.save();
        res.json({ success: true });
    } catch (error) {
        res.status(400).json({ success: false, message: 'Ошибка подписки' });
    }
});
const mongoose = require('mongoose');

const subscriptionSchema = new mongoose.Schema({
    email: { type: String, required: true },
    postId: { type: mongoose.Schema.Types.ObjectId, ref: 'Post', required: true }
});

module.exports = mongoose.model('Subscription', subscriptionSchema);
const fetch = require('node-fetch');

app.get('/anime/:id', async (req, res) => {
    try {
        const response = await fetch(`https://api.example.com/anime/${req.params.id}`);
        const data = await response.json();
        res.json(data);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения данных из API' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Детали аниме</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Детали аниме</h1>
        <nav>
            <a href="/">Главная</a>
            <a href="/create-post.html">Создать пост</a>
        </nav>
    </header>

    <div class="container">
        <section id="anime-content">
            <!-- Содержимое аниме -->
        </section>
    </div>

    <script>
        const animeId = new URLSearchParams(window.location.search).get('id');

        document.addEventListener('DOMContentLoaded', function () {
            fetch(`/anime/${animeId}`)
                .then(response => response.json())
                .then(anime => {
                    document.getElementById('anime-content').innerHTML = `
                        <h2>${anime.title}</h2>
                        <p>${anime.description}</p>
                        <img src="${anime.imageUrl}" alt="${anime.title}">
                    `;
                })
                .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
npm install redis
const redis = require('redis');
const client = redis.createClient();

app.get('/posts', async (req, res) => {
    const cacheKey = 'posts';
    client.get(cacheKey, async (err, data) => {
        if (data) {
            return res.json(JSON.parse(data));
        } else {
            try {
                const posts = await Post.find();
                client.setex(cacheKey, 3600, JSON.stringify(posts));
                res.json(posts);
            } catch (error) {
                res.status(500).json({ error: 'Ошибка получения постов' });
            }
        }
    });
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ Панель</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Админ Панель</h1>
        <nav>
            <a href="/admin-posts.html">Управление постами</a>
            <a href="/admin-users.html">Управление пользователями</a>
        </nav>
    </header>

    <div class="container">
        <section id="admin-content">
            <!-- Контент админки -->
        </section>
    </div>

    <script>
        // Пример JavaScript для динамического управления постами
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/admin/posts')
                .then(response => response.json())
                .then(posts => {
                    const adminContent = document.getElementById('admin-content');
                    adminContent.innerHTML = '<h2>Управление постами</h2><table><thead><tr><th>Title</th><th>Actions</th></tr></thead><tbody></tbody></table>';
                    const tbody = adminContent.querySelector('tbody');
                    posts.forEach(post => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${post.title}</td>
                            <td>
                                <button onclick="editPost('${post._id}')">Редактировать</button>
                                <button onclick="deletePost('${post._id}')">Удалить</button>
                            </td>
                        `;
                        tbody.appendChild(row);
                    });
                });

            window.editPost = function (id) {
                window.location.href = `/admin-edit-post.html?id=${id}`;
            };

            window.deletePost = function (id) {
                fetch(`/admin/posts/${id}`, { method: 'DELETE' })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            window.location.reload();
                        } else {
                            alert(data.message);
                        }
                    });
            };
        });
    </script>
</body>
</html>
app.get('/admin/posts', async (req, res) => {
    try {
        const posts = await Post.find();
        res.json(posts);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения постов' });
    }
});

app.delete('/admin/posts/:id', async (req, res) => {
    try {
        await Post.findByIdAndDelete(req.params.id);
        res.json({ success: true });
    } catch (error) {
        res.status(400).json({ success: false, message: 'Ошибка удаления поста' });
    }
});
<form id="comment-form">
    <textarea id="comment" name="comment" required></textarea>
    <div class="g-recaptcha" data-sitekey="your-site-key"></div>
    <button type="submit">Оставить комментарий</button>
</form>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>
const fetch = require('node-fetch');

app.post('/comments/:postId', async (req, res) => {
    const { content, 'g-recaptcha-response': captchaResponse } = req.body;

    try {
        const secretKey = 'your-secret-key';
        const response = await fetch(`https://www.google.com/recaptcha/api/siteverify?secret=${secretKey}&response=${captchaResponse}`, {
            method: 'POST'
        });
        const data = await response.json();

        if (data.success) {
            const comment = new Comment({ postId: req.params.postId, content });
            await comment.save();
            res.json({ success: true });
        } else {
            res.status(400).json({ success: false, message: 'Ошибка CAPTCHA' });
        }
    } catch (error) {
        res.status(500).json({ success: false, message: 'Ошибка добавления комментария' });
    }
});
<link rel="stylesheet" href="https://your-cdn-url/styles.css">
<script src="https://your-cdn-url/script.js"></script>
npm install csurf
const csrf = require('csurf');
const csrfProtection = csrf({ cookie: true });
app.use(csrfProtection);

app.use((req, res, next) => {
    res.locals.csrfToken = req.csrfToken();
    next();
});
<input type="hidden" name="_csrf" value="<%= csrfToken %>">
const escapeHtml = require('escape-html');
const safeContent = escapeHtml(userInput);
function escapeHtml(text) {
    const map = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#039;'
    };
    return text.replace(/[&<>"']/g, function(m) { return map[m]; });
}
<select id="language-selector">
    <option value="en">English</option>
    <option value="ru">Русский</option>
    <!-- Другие языки -->
</select>
document.getElementById('language-selector').addEventListener('change', function () {
    const lang = this.value;
    fetch(`/locales/${lang}.json`)
        .then(response => response.json())
        .then(data => {
            // Обновите текст на странице в соответствии с выбранным языком
        });
});
{
    "welcome": "Welcome",
    "posts": "Posts",
    "comments": "Comments"
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Регистрация</h1>
    </header>

    <div class="container">
        <form id="register-form">
            <label for="username">Имя пользователя:</label>
            <input type="text" id="username" name="username" required>
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            <label for="password">Пароль:</label>
            <input type="password" id="password" name="password" required>
            <button type="submit">Регистрация</button>
        </form>
    </div>

    <script>
        document.getElementById('register-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            fetch('/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, email, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/login.html';
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Авторизация</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Авторизация</h1>
    </header>

    <div class="container">
        <form id="login-form">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            <label for="password">Пароль:</label>
            <input type="password" id="password" name="password" required>
            <button type="submit">Войти</button>
        </form>
    </div>

    <script>
        document.getElementById('login-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            fetch('/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/';
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
const bcrypt = require('bcrypt');
const jwt = require('jsonwebtoken');
const User = require('./models/User');

app.post('/register', async (req, res) => {
    try {
        const { username, email, password } = req.body;
        const hashedPassword = await bcrypt.hash(password, 10);
        const newUser = new User({ username, email, password: hashedPassword });
        await newUser.save();
        res.json({ success: true });
    } catch (error) {
        res.status(400).json({ success: false, message: 'Ошибка регистрации' });
    }
});

app.post('/login', async (req, res) => {
    try {
        const { email, password } = req.body;
        const user = await User.findOne({ email });
        if (user && await bcrypt.compare(password, user.password)) {
            const token = jwt.sign({ id: user._id }, 'your-secret-key', { expiresIn: '1h' });
            res.json({ success: true, token });
        } else {
            res.status(401).json({ success: false, message: 'Неверный email или пароль' });
        }
    } catch (error) {
        res.status(500).json({ success: false, message: 'Ошибка авторизации' });
    }
});
const mongoose = require('mongoose');

const userSchema = new mongoose.Schema({
    username: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    password: { type: String, required: true }
});

module.exports = mongoose.model('User', userSchema);
<section id="social-share">
    <h2>Поделиться</h2>
    <a href="https://www.facebook.com/sharer/sharer.php?u=<%= postUrl %>" target="_blank">Поделиться в Facebook</a>
    <a href="https://twitter.com/intent/tweet?url=<%= postUrl %>" target="_blank">Твитнуть</a>
    <a href="https://t.me/share/url?url=<%= postUrl %>" target="_blank">Поделиться в Telegram</a>
</section>
npm install passport passport-google-oauth20
const passport = require('passport');
const GoogleStrategy = require('passport-google-oauth20').Strategy;
const User = require('./models/User');

passport.use(new GoogleStrategy({
    clientID: 'your-client-id',
    clientSecret: 'your-client-secret',
    callbackURL: '/auth/google/callback'
}, async (accessToken, refreshToken, profile, done) => {
    try {
        const user = await User.findOne({ googleId: profile.id });
        if (user) {
            done(null, user);
        } else {
            const newUser = new User({ googleId: profile.id });
            await newUser.save();
            done(null, newUser);
        }
    } catch (error) {
        done(error, null);
    }
}));

passport.serializeUser((user, done) => {
    done(null, user.id);
});

passport.deserializeUser(async (id, done) => {
    try {
        const user = await User.findById(id);
        done(null, user);
    } catch (error) {
        done(error, null);
    }
});
app.get('/auth/google', passport.authenticate('google', {
    scope: ['profile']
}));

app.get('/auth/google/callback', passport.authenticate('google', {
    failureRedirect: '/'
}), (req, res) => {
    res.redirect('/');
});
<script async src="https://www.googletagmanager.com/gtag/js?id=your-tracking-id"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'your-tracking-id');
</script>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f4f4f4;
}

header {
    background-color: #333;
    color: #fff;
    padding: 10px;
    text-align: center;
}

nav a {
    color: #fff;
    margin: 0 10px;
    text-decoration: none;
}

.container {
    max-width: 1200px;
    margin: 20px auto;
    padding: 0 20px;
}

button {
    background-color: #007BFF;
    border: none;
    color: #fff;
    padding: 10px 20px;
    cursor: pointer;
}

button:hover {
    background-color: #0056b3;
}

@media (max-width: 768px) {
    .container {
        padding: 0 10px;
    }
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Загрузка медиафайлов</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Загрузка медиафайлов</h1>
    </header>

    <div class="container">
        <form id="upload-form" enctype="multipart/form-data">
            <label for="file">Выберите файл:</label>
            <input type="file" id="file" name="file" required>
            <button type="submit">Загрузить</button>
        </form>
    </div>

    <script>
        document.getElementById('upload-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const formData = new FormData(this);

            fetch('/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Файл успешно загружен');
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Ошибка:', error));
        });
    </script>
</body>
</html>
const multer = require('multer');
const path = require('path');
const upload = multer({
    storage: multer.diskStorage({
        destination: (req, file, cb) => {
            cb(null, 'uploads/');
        },
        filename: (req, file, cb) => {
            cb(null, `${Date.now()}_${file.originalname}`);
        }
    }),
    limits: { fileSize: 10 * 1024 * 1024 } // 10 MB
});

app.post('/upload', upload.single('file'), (req, res) => {
    if (req.file) {
        res.json({ success: true, fileUrl: `/uploads/${req.file.filename}` });
    } else {
        res.status(400).json({ success: false, message: 'Ошибка загрузки файла' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Уведомления</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Уведомления</h1>
    </header>

    <div class="container">
        <section id="notifications">
            <!-- Уведомления будут загружаться сюда -->
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/notifications')
                .then(response => response.json())
                .then(notifications => {
                    const notificationSection = document.getElementById('notifications');
                    notificationSection.innerHTML = '<h2>Ваши уведомления</h2>';
                    notifications.forEach(notification => {
                        const div = document.createElement('div');
                        div.className = 'notification';
                        div.innerHTML = `
                            <p>${notification.message}</p>
                            <small>${new Date(notification.timestamp).toLocaleString()}</small>
                        `;
                        notificationSection.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Notification = require('./models/Notification');

app.get('/notifications', async (req, res) => {
    try {
        const notifications = await Notification.find({ userId: req.user.id });
        res.json(notifications);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения уведомлений' });
    }
});
const mongoose = require('mongoose');

const notificationSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    message: { type: String, required: true },
    timestamp: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Notification', notificationSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Избранное</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Избранное</h1>
    </header>

    <div class="container">
        <section id="favorites">
            <!-- Избранное будет загружаться сюда -->
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/favorites')
                .then(response => response.json())
                .then(favorites => {
                    const favoritesSection = document.getElementById('favorites');
                    favoritesSection.innerHTML = '<h2>Ваши избранные посты</h2>';
                    favorites.forEach(post => {
                        const div = document.createElement('div');
                        div.className = 'favorite-post';
                        div.innerHTML = `
                            <h3>${post.title}</h3>
                            <a href="/posts/${post.id}">Читать пост</a>
                        `;
                        favoritesSection.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Favorite = require('./models/Favorite');

app.get('/favorites', async (req, res) => {
    try {
        const favorites = await Favorite.find({ userId: req.user.id }).populate('postId');
        res.json(favorites.map(fav => fav.postId));
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения избранного' });
    }
});

app.post('/favorites', async (req, res) => {
    try {
        const { postId } = req.body;
        const existingFavorite = await Favorite.findOne({ userId: req.user.id, postId });
        if (!existingFavorite) {
            const favorite = new Favorite({ userId: req.user.id, postId });
            await favorite.save();
        }
        res.json({ success: true });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка добавления в избранное' });
    }
});
const mongoose = require('mongoose');

const favoriteSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    postId: { type: mongoose.Schema.Types.ObjectId, ref: 'Post', required: true }
});

module.exports = mongoose.model('Favorite', favoriteSchema);
const fetch = require('node-fetch');

app.get('/external-data', async (req, res) => {
    try {
        const response = await fetch('https://api.example.com/data');
        const data = await response.json();
        res.json(data);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения данных с внешнего API' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Внешние данные</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Внешние данные</h1>
    </header>

    <div class="container">
        <section id="external-data">
            <!-- Данные будут загружаться сюда -->
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/external-data')
                .then(response => response.json())
                .then(data => {
                    const dataSection = document.getElementById('external-data');
                    dataSection.innerHTML = '<h2>Данные из внешнего API</h2>';
                    data.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'external-item';
                        div.innerHTML = `
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        `;
                        dataSection.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Поиск</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Поиск</h1>
    </header>

    <div class="container">
        <form id="search-form">
            <input type="text" id="query" name="query" placeholder="Введите запрос" required>
            <button type="submit">Поиск</button>
        </form>
        <section id="search-results">
            <!-- Результаты поиска будут загружаться сюда -->
        </section>
    </div>

    <script>
        document.getElementById('search-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const query = document.getElementById('query').value;

            fetch(`/search?query=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(results => {
                    const resultsSection = document.getElementById('search-results');
                    resultsSection.innerHTML = '<h2>Результаты поиска</h2>';
                    results.forEach(result => {
                        const div = document.createElement('div');
                        div.className = 'search-result';
                        div.innerHTML = `
                            <h3>${result.title}</h3>
                            <p>${result.description}</p>
                            <a href="/posts/${result.id}">Читать пост</a>
                        `;
                        resultsSection.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Post = require('./models/Post');

app.get('/search', async (req, res) => {
    try {
        const query = req.query.query;
        const results = await Post.find({ $text: { $search: query } });
        res.json(results);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка поиска' });
    }
});
const postSchema = new mongoose.Schema({
    title: String,
    description: String,
    content: String
});

postSchema.index({ title: 'text', description: 'text', content: 'text' });

module.exports = mongoose.model('Post', postSchema);
npm install node-cache
const NodeCache = require('node-cache');
const cache = new NodeCache({ stdTTL: 600 }); // Кэш на 10 минут

app.get('/posts', async (req, res) => {
    try {
        const cachedPosts = cache.get('posts');
        if (cachedPosts) {
            res.json(cachedPosts);
        } else {
            const posts = await Post.find();
            cache.set('posts', posts);
            res.json(posts);
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения постов' });
    }
});
const sharp = require('sharp');

const compressImage = async (inputPath, outputPath) => {
    await sharp(inputPath)
        .resize(800) // Измените размер
        .toFormat('jpeg')
        .jpeg({ quality: 80 }) // Уровень качества
        .toFile(outputPath);
};

module.exports = compressImage;
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Выбор языка</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Выберите язык</h1>
    </header>

    <div class="container">
        <form id="language-form">
            <select id="language" name="language">
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="fr">Français</option>
                <!-- Добавьте другие языки по желанию -->
            </select>
            <button type="submit">Сохранить</button>
        </form>
    </div>

    <script>
        document.getElementById('language-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const language = document.getElementById('language').value;

            fetch('/set-language', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ language })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Язык изменен');
                    window.location.reload();
                } else {
                    alert('Ошибка изменения языка');
                }
            });
        });
    </script>
</body>
</html>
app.post('/set-language', (req, res) => {
    const { language } = req.body;
    if (['en', 'es', 'fr'].includes(language)) {
        req.session.language = language; // Сохраняем язык в сессии
        res.json({ success: true });
    } else {
        res.status(400).json({ success: false, message: 'Неправильный язык' });
    }
});
npm install i18next i18next-express-middleware
const i18n = require('i18next');
const i18nMiddleware = require('i18next-express-middleware');
const Backend = require('i18next-fs-backend');

i18n
    .use(Backend)
    .use(i18nMiddleware.LanguageDetector)
    .init({
        backend: {
            loadPath: './locales/{{lng}}/{{ns}}.json'
        },
        fallbackLng: 'en',
        preload: ['en', 'es', 'fr'],
        saveMissing: true
    });

app.use(i18nMiddleware.handle(i18n));
{
    "welcome": "Welcome",
    "language_selection": "Select Language"
}
{
    "welcome": "Bienvenido",
    "language_selection": "Seleccionar idioma"
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Панель администратора</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Панель администратора</h1>
    </header>

    <div class="container">
        <section id="admin-panel">
            <h2>Управление пользователями</h2>
            <button id="load-users">Загрузить пользователей</button>
            <div id="user-list">
                <!-- Список пользователей будет загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('load-users').addEventListener('click', function () {
            fetch('/admin/users')
                .then(response => response.json())
                .then(users => {
                    const userList = document.getElementById('user-list');
                    userList.innerHTML = '<h3>Пользователи</h3>';
                    users.forEach(user => {
                        const div = document.createElement('div');
                        div.className = 'user';
                        div.innerHTML = `
                            <p>Имя: ${user.name}</p>
                            <p>Электронная почта: ${user.email}</p>
                        `;
                        userList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const User = require('./models/User');

app.get('/admin/users', async (req, res) => {
    try {
        if (req.user && req.user.isAdmin) {
            const users = await User.find();
            res.json(users);
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения пользователей' });
    }
});
const userSchema = new mongoose.Schema({
    name: String,
    email: String,
    password: String,
    isAdmin: { type: Boolean, default: false }
});
npm install stripe
const Stripe = require('stripe');
const stripe = Stripe('your-stripe-secret-key');

app.post('/charge', async (req, res) => {
    const { amount, source } = req.body;

    try {
        const charge = await stripe.charges.create({
            amount,
            currency: 'usd',
            source,
            description: 'Example charge'
        });
        res.json(charge);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка платежа' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Оформление заказа</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Оформление заказа</h1>
    </header>

    <div class="container">
        <form id="checkout-form">
            <label for="amount">Сумма:</label>
            <input type="number" id="amount" name="amount" required>
            <label for="card-element">Карта:</label>
            <div id="card-element"></div>
            <button type="submit">Оплатить</button>
        </form>
    </div>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
        const stripe = Stripe('your-stripe-public-key');
        const elements = stripe.elements();
        const cardElement = elements.create('card');
        cardElement.mount('#card-element');

        document.getElementById('checkout-form').addEventListener('submit', function (event) {
            event.preventDefault();
            stripe.createToken(cardElement).then(result => {
                if (result.error) {
                    alert(result.error.message);
                } else {
                    fetch('/charge', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ amount: document.getElementById('amount').value, source: result.token.id })
                    })
                    .then(response => response.json())
                    .then(data => {
                        alert('Платеж успешен!');
                    })
                    .catch(error => console.error('Ошибка:', error));
                }
            });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отзывы</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Отзывы</h1>
    </header>

    <div class="container">
        <section id="reviews">
            <h2>Оставить отзыв</h2>
            <form id="review-form">
                <label for="rating">Рейтинг:</label>
                <input type="number" id="rating" name="rating" min="1" max="5" required>
                <label for="review">Отзыв:</label>
                <textarea id="review" name="review" required></textarea>
                <button type="submit">Отправить</button>
            </form>
            <div id="review-list">
                <!-- Отзывы будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('review-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const rating = document.getElementById('rating').value;
            const review = document.getElementById('review').value;

            fetch('/reviews', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ rating, review })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Отзыв отправлен');
                    window.location.reload();
                } else {
                    alert('Ошибка отправки отзыва');
                }
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            fetch('/reviews')
                .then(response => response.json())
                .then(reviews => {
                    const reviewList = document.getElementById('review-list');
                    reviews.forEach(review => {
                        const div = document.createElement('div');
                        div.className = 'review';
                        div.innerHTML = `
                            <p>Рейтинг: ${review.rating}</p>
                            <p>${review.text}</p>
                        `;
                        reviewList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отзывы</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Отзывы</h1>
    </header>

    <div class="container">
        <section id="reviews">
            <h2>Оставить отзыв</h2>
            <form id="review-form">
                <label for="rating">Рейтинг:</label>
                <input type="number" id="rating" name="rating" min="1" max="5" required>
                <label for="review">Отзыв:</label>
                <textarea id="review" name="review" required></textarea>
                <button type="submit">Отправить</button>
            </form>
            <div id="review-list">
                <!-- Отзывы будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('review-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const rating = document.getElementById('rating').value;
            const review = document.getElementById('review').value;

            fetch('/reviews', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ rating, review })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Отзыв отправлен');
                    window.location.reload();
                } else {
                    alert('Ошибка отправки отзыва');
                }
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            fetch('/reviews')
                .then(response => response.json())
                .then(reviews => {
                    const reviewList = document.getElementById('review-list');
                    reviews.forEach(review => {
                        const div = document.createElement('div');
                        div.className = 'review';
                        div.innerHTML = `
                            <p>Рейтинг: ${review.rating}</p>
                            <p>${review.text}</p>
                        `;
                        reviewList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Review = require('./models/Review');

app.post('/reviews', async (req, res) => {
    try {
        const { rating, review } = req.body;
        const newReview = new Review({ rating, text: review });
        await newReview.save();
        res.json({ success: true });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка отправки отзыва' });
    }
});

app.get('/reviews', async (req, res) => {
    try {
        const reviews = await Review.find();
        res.json(reviews);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения отзывов' });
    }
});
const mongoose = require('mongoose');

const reviewSchema = new mongoose.Schema({
    rating: { type: Number, required: true },
    text: { type: String, required: true }
});

module.exports = mongoose.model('Review', reviewSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Модерация контента</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Модерация контента</h1>
    </header>

    <div class="container">
        <section id="content-moderation">
            <h2>Модерация постов</h2>
            <button id="load-posts">Загрузить посты</button>
            <div id="post-list">
                <!-- Список постов для модерации будет загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('load-posts').addEventListener('click', function () {
            fetch('/admin/moderate')
                .then(response => response.json())
                .then(posts => {
                    const postList = document.getElementById('post-list');
                    postList.innerHTML = '<h3>Посты на модерацию</h3>';
                    posts.forEach(post => {
                        const div = document.createElement('div');
                        div.className = 'post';
                        div.innerHTML = `
                            <h4>${post.title}</h4>
                            <p>${post.content}</p>
                            <button data-id="${post._id}" class="approve">Одобрить</button>
                            <button data-id="${post._id}" class="reject">Отклонить</button>
                        `;
                        postList.appendChild(div);
                    });

                    // Обработчики для кнопок
                    document.querySelectorAll('.approve').forEach(button => {
                        button.addEventListener('click', function () {
                            fetch(`/admin/moderate/${this.dataset.id}`, { method: 'POST' })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        alert('Пост одобрен');
                                        window.location.reload();
                                    } else {
                                        alert('Ошибка одобрения поста');
                                    }
                                });
                        });
                    });

                    document.querySelectorAll('.reject').forEach(button => {
                        button.addEventListener('click', function () {
                            fetch(`/admin/moderate/${this.dataset.id}`, { method: 'DELETE' })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        alert('Пост отклонен');
                                        window.location.reload();
                                    } else {
                                        alert('Ошибка отклонения поста');
                                    }
                                });
                        });
                    });
                });
        });
    </script>
</body>
</html>
const Post = require('./models/Post');

app.get('/admin/moderate', async (req, res) => {
    try {
        if (req.user && req.user.isAdmin) {
            const posts = await Post.find({ isApproved: false });
            res.json(posts);
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения постов' });
    }
});

app.post('/admin/moderate/:id', async (req, res) => {
    try {
        if (req.user && req.user.isAdmin) {
            await Post.findByIdAndUpdate(req.params.id, { isApproved: true });
            res.json({ success: true });
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка одобрения поста' });
    }
});

app.delete('/admin/moderate/:id', async (req, res) => {
    try {
        if (req.user && req.user.isAdmin) {
            await Post.findByIdAndDelete(req.params.id);
            res.json({ success: true });
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка удаления поста' });
    }
});
const postSchema = new mongoose.Schema({
    title: String,
    content: String,
    isApproved: { type: Boolean, default: false }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Уведомления</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Уведомления</h1>
    </header>

    <div class="container">
        <section id="notifications">
            <button id="load-notifications">Загрузить уведомления</button>
            <div id="notification-list">
                <!-- Уведомления будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('load-notifications').addEventListener('click', function () {
            fetch('/notifications')
                .then(response => response.json())
                .then(notifications => {
                    const notificationList = document.getElementById('notification-list');
                    notificationList.innerHTML = '<h3>Уведомления</h3>';
                    notifications.forEach(notification => {
                        const div = document.createElement('div');
                        div.className = 'notification';
                        div.innerHTML = `
                            <p>${notification.message}</p>
                        `;
                        notificationList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Notification = require('./models/Notification');

app.get('/notifications', async (req, res) => {
    try {
        const notifications = await Notification.find({ userId: req.user._id });
        res.json(notifications);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения уведомлений' });
    }
});
const mongoose = require('mongoose');

const notificationSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    message: { type: String, required: true },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Notification', notificationSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Социальные сети</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Социальные сети</h1>
    </header>

    <div class="container">
        <section id="social-media">
            <h2>Поделитесь с друзьями</h2>
            <a href="https://twitter.com/intent/tweet?text=Check%20this%20out!%20[URL]" target="_blank">Twitter</a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=[URL]" target="_blank">Facebook</a>
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=[URL]&title=[TITLE]" target="_blank">LinkedIn</a>
        </section>
    </div>
</body>
</html>
/* Стиль для мобильных устройств */
@media only screen and (max-width: 600px) {
    header, .container {
        padding: 10px;
    }

    .container {
        display: block;
    }

    .post, .review, .notification {
        margin-bottom: 15px;
    }

    #social-media a {
        display: block;
        margin-bottom: 10px;
    }
}
const fs = require('fs');
const mongoose = require('mongoose');
const { exec } = require('child_process');

// Подключение к MongoDB
mongoose.connect('mongodb://localhost:27017/your-db-name', { useNewUrlParser: true, useUnifiedTopology: true });

const backupDatabase = () => {
    exec('mongodump --uri="mongodb://localhost:27017/your-db-name" --out=backup', (error, stdout, stderr) => {
        if (error) {
            console.error(`Ошибка бэкапа: ${error}`);
            return;
        }
        console.log(`Бэкап завершен: ${stdout}`);
    });
};

backupDatabase();
const { exec } = require('child_process');

const restoreDatabase = () => {
    exec('mongorestore --uri="mongodb://localhost:27017/your-db-name" --drop backup', (error, stdout, stderr) => {
        if (error) {
            console.error(`Ошибка восстановления: ${error}`);
            return;
        }
        console.log(`Восстановление завершено: ${stdout}`);
    });
};

restoreDatabase();
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Блог</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Блог</h1>
    </header>

    <div class="container">
        <section id="blog">
            <h2>Свежие посты</h2>
            <button id="load-blog-posts">Загрузить посты</button>
            <div id="blog-post-list">
                <!-- Посты блога будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('load-blog-posts').addEventListener('click', function () {
            fetch('/blog')
                .then(response => response.json())
                .then(posts => {
                    const blogPostList = document.getElementById('blog-post-list');
                    blogPostList.innerHTML = '<h3>Посты блога</h3>';
                    posts.forEach(post => {
                        const div = document.createElement('div');
                        div.className = 'blog-post';
                        div.innerHTML = `
                            <h3>${post.title}</h3>
                            <p>${post.content}</p>
                            <a href="/blog/${post._id}">Читать больше</a>
                        `;
                        blogPostList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const BlogPost = require('./models/BlogPost');

app.get('/blog', async (req, res) => {
    try {
        const posts = await BlogPost.find();
        res.json(posts);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения постов блога' });
    }
});

app.get('/blog/:id', async (req, res) => {
    try {
        const post = await BlogPost.findById(req.params.id);
        if (post) {
            res.json(post);
        } else {
            res.status(404).json({ error: 'Пост не найден' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения поста блога' });
    }
});
const mongoose = require('mongoose');

const blogPostSchema = new mongoose.Schema({
    title: String,
    content: String,
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('BlogPost', blogPostSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Поиск</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Поиск</h1>
    </header>

    <div class="container">
        <section id="search">
            <h2>Поиск по сайту</h2>
            <input type="text" id="search-input" placeholder="Введите запрос...">
            <button id="search-button">Поиск</button>
            <div id="search-results">
                <!-- Результаты поиска будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('search-button').addEventListener('click', function () {
            const query = document.getElementById('search-input').value;

            fetch(`/search?q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(results => {
                    const searchResults = document.getElementById('search-results');
                    searchResults.innerHTML = '<h3>Результаты поиска</h3>';
                    results.forEach(result => {
                        const div = document.createElement('div');
                        div.className = 'search-result';
                        div.innerHTML = `
                            <h4><a href="/content/${result._id}">${result.title}</a></h4>
                            <p>${result.summary}</p>
                        `;
                        searchResults.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Content = require('./models/Content'); // Модель контента, по которой будем искать

app.get('/search', async (req, res) => {
    try {
        const query = req.query.q;
        const results = await Content.find({ title: new RegExp(query, 'i') }).limit(10);
        res.json(results);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка поиска' });
    }
});
const mongoose = require('mongoose');

const contentSchema = new mongoose.Schema({
    title: String,
    summary: String,
    body: String,
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Content', contentSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Администрирование</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Администрирование</h1>
    </header>

    <div class="container">
        <section id="admin">
            <h2>Управление контентом</h2>
            <button id="load-content">Загрузить контент</button>
            <div id="content-list">
                <!-- Список контента для управления будет загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('load-content').addEventListener('click', function () {
            fetch('/admin/content')
                .then(response => response.json())
                .then(content => {
                    const contentList = document.getElementById('content-list');
                    contentList.innerHTML = '<h3>Контент</h3>';
                    content.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'content-item';
                        div.innerHTML = `
                            <h4>${item.title}</h4>
                            <p>${item.summary}</p>
                            <button data-id="${item._id}" class="edit">Редактировать</button>
                            <button data-id="${item._id}" class="delete">Удалить</button>
                        `;
                        contentList.appendChild(div);
                    });

                    // Обработчики для кнопок
                    document.querySelectorAll('.edit').forEach(button => {
                        button.addEventListener('click', function () {
                            window.location.href = `/admin/content/edit/${this.dataset.id}`;
                        });
                    });

                    document.querySelectorAll('.delete').forEach(button => {
                        button.addEventListener('click', function () {
                            fetch(`/admin/content/${this.dataset.id}`, { method: 'DELETE' })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        alert('Контент удален');
                                        window.location.reload();
                                    } else {
                                        alert('Ошибка удаления контента');
                                    }
                                });
                        });
                    });
                });
        });
    </script>
</body>
</html>
app.get('/admin/content', async (req, res) => {
    try {
        if (req.user && req.user.isAdmin) {
            const content = await Content.find();
            res.json(content);
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения контента' });
    }
});

app.delete('/admin/content/:id', async (req, res) => {
    try {
        if (req.user && req.user.isAdmin) {
            await Content.findByIdAndDelete(req.params.id);
            res.json({ success: true });
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка удаления контента' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Видео</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Видео</h1>
    </header>

    <div class="container">
        <section id="videos">
            <h2>Смотрите наше видео</h2>
            <div id="video-list">
                <!-- Видео будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        fetch('/videos')
            .then(response => response.json())
            .then(videos => {
                const videoList = document.getElementById('video-list');
                videos.forEach(video => {
                    const div = document.createElement('div');
                    div.className = 'video';
                    div.innerHTML = `
                        <h3>${video.title}</h3>
                        <iframe src="${video.url}" frameborder="0" allowfullscreen></iframe>
                    `;
                    videoList.appendChild(div);
                });
            });
    </script>
</body>
</html>
const Video = require('./models/Video');

app.get('/videos', async (req, res) => {
    try {
        const videos = await Video.find();
        res.json(videos);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения видео' });
    }
});
const mongoose = require('mongoose');

const videoSchema = new mongoose.Schema({
    title: String,
    url: String,
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Video', videoSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Аутентификация</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Аутентификация</h1>
    </header>

    <div class="container">
        <section id="auth">
            <h2>Вход / Регистрация</h2>
            <form id="auth-form">
                <input type="text" id="username" placeholder="Имя пользователя" required>
                <input type="password" id="password" placeholder="Пароль" required>
                <button type="submit">Войти</button>
                <button type="button" id="register-button">Регистрация</button>
            </form>
        </section>
    </div>

    <script>
        document.getElementById('auth-form').addEventListener('submit', function (e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            fetch('/auth/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/';
                } else {
                    alert(data.message);
                }
            });
        });

        document.getElementById('register-button').addEventListener('click', function () {
            window.location.href = '/auth/register';
        });
    </script>
</body>
</html>
const User = require('./models/User');
const bcrypt = require('bcrypt');
const jwt = require('jsonwebtoken');

app.post('/auth/login', async (req, res) => {
    const { username, password } = req.body;
    try {
        const user = await User.findOne({ username });
        if (user && await bcrypt.compare(password, user.password)) {
            const token = jwt.sign({ userId: user._id }, 'secret_key', { expiresIn: '1h' });
            res.json({ success: true, token });
        } else {
            res.status(401).json({ success: false, message: 'Неверные данные для входа' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка входа' });
    }
});
const mongoose = require('mongoose');
const bcrypt = require('bcrypt');

const userSchema = new mongoose.Schema({
    username: { type: String, unique: true, required: true },
    password: { type: String, required: true },
    isAdmin: { type: Boolean, default: false }
});

userSchema.pre('save', async function (next) {
    if (this.isModified('password')) {
        this.password = await bcrypt.hash(this.password, 10);
    }
    next();
});

module.exports = mongoose.model('User', userSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Комментарии</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Комментарии</h1>
    </header>

    <div class="container">
        <section id="comments">
            <h2>Комментарии</h2>
            <div id="comment-list">
                <!-- Комментарии будут загружаться сюда -->
            </div>
            <form id="comment-form">
                <textarea id="comment-text" placeholder="Оставьте комментарий..." required></textarea>
                <button type="submit">Отправить</button>
            </form>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const contentId = window.location.pathname.split('/').pop();
            
            fetch(`/comments/${contentId}`)
                .then(response => response.json())
                .then(comments => {
                    const commentList = document.getElementById('comment-list');
                    commentList.innerHTML = '<h3>Комментарии</h3>';
                    comments.forEach(comment => {
                        const div = document.createElement('div');
                        div.className = 'comment';
                        div.innerHTML = `
                            <p>${comment.text}</p>
                            <small>От: ${comment.author}</small>
                        `;
                        commentList.appendChild(div);
                    });
                });

            document.getElementById('comment-form').addEventListener('submit', function (e) {
                e.preventDefault();
                const text = document.getElementById('comment-text').value;
                const author = 'User'; // Можно заменить на реальное имя пользователя

                fetch(`/comments/${contentId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text, author })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        window.location.reload();
                    } else {
                        alert('Ошибка отправки комментария');
                    }
                });
            });
        });
    </script>
</body>
</html>
const Comment = require('./models/Comment');

app.get('/comments/:contentId', async (req, res) => {
    try {
        const comments = await Comment.find({ contentId: req.params.contentId });
        res.json(comments);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения комментариев' });
    }
});

app.post('/comments/:contentId', async (req, res) => {
    const { text, author } = req.body;
    try {
        const comment = new Comment({
            contentId: req.params.contentId,
            text,
            author
        });
        await comment.save();
        res.json({ success: true });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка добавления комментария' });
    }
});
const mongoose = require('mongoose');

const commentSchema = new mongoose.Schema({
    contentId: { type: mongoose.Schema.Types.ObjectId, ref: 'Content', required: true },
    text: { type: String, required: true },
    author: { type: String, required: true },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Comment', commentSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Избранное</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Избранное</h1>
    </header>

    <div class="container">
        <section id="favorites">
            <h2>Ваши избранные элементы</h2>
            <div id="favorites-list">
                <!-- Избранное будет загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/favorites')
                .then(response => response.json())
                .then(favorites => {
                    const favoritesList = document.getElementById('favorites-list');
                    favorites.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'favorite-item';
                        div.innerHTML = `
                            <h4><a href="/content/${item._id}">${item.title}</a></h4>
                            <button data-id="${item._id}" class="remove-favorite">Удалить из избранного</button>
                        `;
                        favoritesList.appendChild(div);
                    });

                    document.querySelectorAll('.remove-favorite').forEach(button => {
                        button.addEventListener('click', function () {
                            fetch(`/favorites/${this.dataset.id}`, { method: 'DELETE' })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        window.location.reload();
                                    } else {
                                        alert('Ошибка удаления из избранного');
                                    }
                                });
                        });
                    });
                });
        });
    </script>
</body>
</html>
const Favorite = require('./models/Favorite');

app.get('/favorites', async (req, res) => {
    try {
        if (req.user) {
            const favorites = await Favorite.find({ userId: req.user._id });
            res.json(favorites);
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения избранного' });
    }
});

app.post('/favorites/:contentId', async (req, res) => {
    try {
        if (req.user) {
            const favorite = new Favorite({
                userId: req.user._id,
                contentId: req.params.contentId
            });
            await favorite.save();
            res.json({ success: true });
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка добавления в избранное' });
    }
});

app.delete('/favorites/:contentId', async (req, res) => {
    try {
        if (req.user) {
            await Favorite.findOneAndDelete({ userId: req.user._id, contentId: req.params.contentId });
            res.json({ success: true });
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка удаления из избранного' });
    }
});
const mongoose = require('mongoose');

const favoriteSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    contentId: { type: mongoose.Schema.Types.ObjectId, ref: 'Content', required: true }
});

module.exports = mongoose.model('Favorite', favoriteSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Аниме</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Аниме</h1>
    </header>

    <div class="container">
        <section id="anime">
            <h2>Популярное аниме</h2>
            <div id="anime-list">
                <!-- Аниме будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/anime')
                .then(response => response.json())
                .then(anime => {
                    const animeList = document.getElementById('anime-list');
                    anime.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'anime-item';
                        div.innerHTML = `
                            <h3>${item.title}</h3>
                            <img src="${item.image}" alt="${item.title}">
                            <p>${item.synopsis}</p>
                        `;
                        animeList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const axios = require('axios');

app.get('/anime', async (req, res) => {
    try {
        const response = await axios.get('https://api.example.com/anime'); // Замените на реальный URL API
        res.json(response.data);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения данных аниме' });
    }
});
const cache = {};

app.get('/cache/:key', (req, res) => {
    const key = req.params.key;
    if (cache[key]) {
        res.json(cache[key]);
    } else {
        res.status(404).json({ error: 'Кэш не найден' });
    }
});

app.post('/cache/:key', (req, res) => {
    const key = req.params.key;
    const data = req.body;
    cache[key] = data;
    res.json({ success: true });
});
app.get('/content/:id', async (req, res) => {
    const key = `content_${req.params.id}`;
    const cached = await cache.get(key);
    if (cached) {
        res.json(cached);
    } else {
        try {
            const content = await Content.findById(req.params.id);
            await cache.set(key, content);
            res.json(content);
        } catch (error) {
            res.status(500).json({ error: 'Ошибка получения контента' });
        }
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Рейтинг</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Рейтинг</h1>
    </header>

    <div class="container">
        <section id="rating">
            <h2>Оцените этот контент</h2>
            <div id="rating-widget">
                <div id="rating-stars">
                    <span data-value="1">★</span>
                    <span data-value="2">★</span>
                    <span data-value="3">★</span>
                    <span data-value="4">★</span>
                    <span data-value="5">★</span>
                </div>
                <div id="rating-average">
                    Средняя оценка: <span id="average-rating">0</span>
                </div>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const contentId = window.location.pathname.split('/').pop();

            // Загрузка средней оценки
            fetch(`/rating/${contentId}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('average-rating').textContent = data.averageRating || '0';
                });

            // Обработка оценки
            document.getElementById('rating-stars').addEventListener('click', function (e) {
                if (e.target.tagName === 'SPAN') {
                    const rating = e.target.dataset.value;

                    fetch(`/rating/${contentId}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ rating })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            document.getElementById('average-rating').textContent = data.newAverageRating;
                        } else {
                            alert('Ошибка при отправке оценки');
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>
const Rating = require('./models/Rating');

app.get('/rating/:contentId', async (req, res) => {
    try {
        const ratings = await Rating.find({ contentId: req.params.contentId });
        const averageRating = ratings.length ? (ratings.reduce((sum, rating) => sum + rating.rating, 0) / ratings.length).toFixed(1) : 0;
        res.json({ averageRating });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения рейтинга' });
    }
});

app.post('/rating/:contentId', async (req, res) => {
    const { rating } = req.body;
    try {
        const newRating = new Rating({
            contentId: req.params.contentId,
            rating: parseInt(rating, 10)
        });
        await newRating.save();
        const ratings = await Rating.find({ contentId: req.params.contentId });
        const newAverageRating = ratings.length ? (ratings.reduce((sum, rating) => sum + rating.rating, 0) / ratings.length).toFixed(1) : 0;
        res.json({ success: true, newAverageRating });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка добавления рейтинга' });
    }
});
const mongoose = require('mongoose');

const ratingSchema = new mongoose.Schema({
    contentId: { type: mongoose.Schema.Types.ObjectId, ref: 'Content', required: true },
    rating: { type: Number, required: true, min: 1, max: 5 },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Rating', ratingSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пользователи</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Управление пользователями</h1>
    </header>

    <div class="container">
        <section id="users">
            <h2>Список пользователей</h2>
            <div id="user-list">
                <!-- Список пользователей будет загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/users')
                .then(response => response.json())
                .then(users => {
                    const userList = document.getElementById('user-list');
                    users.forEach(user => {
                        const div = document.createElement('div');
                        div.className = 'user-item';
                        div.innerHTML = `
                            <h4>${user.username}</h4>
                            <button data-id="${user._id}" class="make-admin">Сделать администратором</button>
                        `;
                        userList.appendChild(div);
                    });

                    document.querySelectorAll('.make-admin').forEach(button => {
                        button.addEventListener('click', function () {
                            fetch(`/users/${this.dataset.id}/admin`, { method: 'POST' })
                                .then(response => response.json())
                                .then(data => {
                                    if (data.success) {
                                        alert('Пользователь стал администратором');
                                    } else {
                                        alert('Ошибка при изменении статуса');
                                    }
                                });
                        });
                    });
                });
        });
    </script>
</body>
</html>
app.get('/users', async (req, res) => {
    try {
        if (req.user && req.user.isAdmin) {
            const users = await User.find();
            res.json(users);
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения пользователей' });
    }
});

app.post('/users/:id/admin', async (req, res) => {
    try {
        if (req.user && req.user.isAdmin) {
            await User.findByIdAndUpdate(req.params.id, { isAdmin: true });
            res.json({ success: true });
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка обновления пользователя' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Выбор языка</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Выбор языка</h1>
    </header>

    <div class="container">
        <section id="language-selection">
            <h2>Выберите язык</h2>
            <select id="language-select">
                <option value="en">English</option>
                <option value="ru">Русский</option>
                <!-- Добавьте другие языки при необходимости -->
            </select>
        </section>
    </div>

    <script>
        document.getElementById('language-select').addEventListener('change', function () {
            const lang = this.value;
            fetch(`/lang/${lang}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ language: lang })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    window.location.reload();
                } else {
                    alert('Ошибка смены языка');
                }
            });
        });
    </script>
</body>
</html>
app.post('/lang/:lang', (req, res) => {
    // Сохранение выбранного языка в сессии или базе данных
    req.session.language = req.params.lang;
    res.json({ success: true });
});
{
    "welcome": "Welcome",
    "login": "Login"
}
{
    "welcome": "Добро пожаловать",
    "login": "Войти"
}
<script async src="https://www.googletagmanager.com/gtag/js?id=YOUR_MEASUREMENT_ID"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'YOUR_MEASUREMENT_ID');
</script>
document.getElementById('some-button').addEventListener('click', function () {
    gtag('event', 'click', {
        'event_category': 'Button',
        'event_label': 'Some Button'
    });
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Уведомления</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Уведомления</h1>
    </header>

    <div class="container">
        <section id="notifications">
            <h2>Ваши уведомления</h2>
            <div id="notification-list">
                <!-- Уведомления будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/notifications')
                .then(response => response.json())
                .then(notifications => {
                    const notificationList = document.getElementById('notification-list');
                    notifications.forEach(notification => {
                        const div = document.createElement('div');
                        div.className = 'notification-item';
                        div.innerHTML = `
                            <h4>${notification.title}</h4>
                            <p>${notification.message}</p>
                        `;
                        notificationList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Notification = require('./models/Notification');

app.get('/notifications', async (req, res) => {
    try {
        if (req.user) {
            const notifications = await Notification.find({ userId: req.user._id });
            res.json(notifications);
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения уведомлений' });
    }
});
const mongoose = require('mongoose');

const notificationSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    title: { type: String, required: true },
    message: { type: String, required: true },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Notification', notificationSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Социальные сети</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Поделитесь в социальных сетях</h1>
    </header>

    <div class="container">
        <section id="social">
            <h2>Поделитесь этим контентом</h2>
            <div id="social-buttons">
                <a href="#" id="facebook-share" target="_blank">Поделиться на Facebook</a>
                <a href="#" id="twitter-share" target="_blank">Поделиться в Twitter</a>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const url = window.location.href;

            document.getElementById('facebook-share').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
            document.getElementById('twitter-share').href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}`;
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Поиск</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Поиск</h1>
    </header>

    <div class="container">
        <section id="search">
            <h2>Поиск контента</h2>
            <input type="text" id="search-query" placeholder="Введите запрос...">
            <button id="search-button">Поиск</button>
            <div id="search-results">
                <!-- Результаты поиска будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('search-button').addEventListener('click', function () {
            const query = document.getElementById('search-query').value;

            fetch(`/search?q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(results => {
                    const searchResults = document.getElementById('search-results');
                    searchResults.innerHTML = '';
                    results.forEach(result => {
                        const div = document.createElement('div');
                        div.className = 'search-result';
                        div.innerHTML = `
                            <h3><a href="/content/${result._id}">${result.title}</a></h3>
                            <p>${result.description}</p>
                        `;
                        searchResults.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Content = require('./models/Content');

app.get('/search', async (req, res) => {
    try {
        const query = req.query.q;
        const results = await Content.find({
            title: new RegExp(query, 'i')
        });
        res.json(results);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка поиска' });
    }
});
/* Основные стили */

body {
    font-family: Arial, sans-serif;
}

.container {
    width: 80%;
    margin: auto;
}

.header, .footer {
    text-align: center;
}

/* Адаптивный дизайн для мобильных устройств */
@media (max-width: 768px) {
    .container {
        width: 95%;
    }

    .header, .footer {
        font-size: 1.2em;
    }

    #search-query {
        width: 100%;
    }
}

@media (max-width: 480px) {
    .header, .footer {
        font-size: 1em;
    }

    #search-query {
        font-size: 1em;
    }
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Рекомендации</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Рекомендации</h1>
    </header>

    <div class="container">
        <section id="recommendations">
            <h2>Рекомендуемые для вас</h2>
            <div id="recommendation-list">
                <!-- Рекомендации будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/recommendations')
                .then(response => response.json())
                .then(recommendations => {
                    const recommendationList = document.getElementById('recommendation-list');
                    recommendations.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'recommendation-item';
                        div.innerHTML = `
                            <h3><a href="/content/${item._id}">${item.title}</a></h3>
                            <img src="${item.image}" alt="${item.title}">
                            <p>${item.description}</p>
                        `;
                        recommendationList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Recommendation = require('./models/Recommendation');

app.get('/recommendations', async (req, res) => {
    try {
        if (req.user) {
            // Логика рекомендаций, возможно, основанная на истории просмотров или предпочтениях
            const recommendations = await Recommendation.find({ userId: req.user._id });
            res.json(recommendations);
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения рекомендаций' });
    }
});
const mongoose = require('mongoose');

const recommendationSchema = new mongoose.Schema({
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    contentId: { type: mongoose.Schema.Types.ObjectId, ref: 'Content', required: true },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Recommendation', recommendationSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Профиль пользователя</h1>
    </header>

    <div class="container">
        <section id="profile">
            <h2>Ваш профиль</h2>
            <div id="profile-info">
                <p>Имя пользователя: <span id="username"></span></p>
                <p>Электронная почта: <span id="email"></span></p>
                <button id="edit-profile">Редактировать</button>
            </div>
            <div id="edit-profile-form" style="display:none;">
                <h3>Редактировать профиль</h3>
                <label for="new-username">Новое имя пользователя:</label>
                <input type="text" id="new-username">
                <label for="new-email">Новая электронная почта:</label>
                <input type="email" id="new-email">
                <button id="save-profile">Сохранить</button>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/profile')
                .then(response => response.json())
                .then(profile => {
                    document.getElementById('username').textContent = profile.username;
                    document.getElementById('email').textContent = profile.email;
                });

            document.getElementById('edit-profile').addEventListener('click', function () {
                document.getElementById('edit-profile-form').style.display = 'block';
            });

            document.getElementById('save-profile').addEventListener('click', function () {
                const newUsername = document.getElementById('new-username').value;
                const newEmail = document.getElementById('new-email').value;

                fetch('/profile', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: newUsername, email: newEmail })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        document.getElementById('username').textContent = newUsername;
                        document.getElementById('email').textContent = newEmail;
                        document.getElementById('edit-profile-form').style.display = 'none';
                    } else {
                        alert('Ошибка сохранения профиля');
                    }
                });
            });
        });
    </script>
</body>
</html>
const User = require('./models/User');

app.get('/profile', async (req, res) => {
    try {
        if (req.user) {
            const user = await User.findById(req.user._id);
            res.json({ username: user.username, email: user.email });
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения профиля' });
    }
});

app.put('/profile', async (req, res) => {
    try {
        if (req.user) {
            await User.findByIdAndUpdate(req.user._id, {
                username: req.body.username,
                email: req.body.email
            });
            res.json({ success: true });
        } else {
            res.status(403).json({ error: 'Доступ запрещен' });
        }
    } catch (error) {
        res.status(500).json({ error: 'Ошибка обновления профиля' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Проигрыватель видео</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Проигрыватель видео</h1>
    </header>

    <div class="container">
        <section id="player">
            <h2>Смотрите видео</h2>
            <video id="video-player" controls>
                <!-- Видео будет загружаться сюда -->
            </video>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const videoId = window.location.pathname.split('/').pop();

            fetch(`/video/${videoId}`)
                .then(response => response.json())
                .then(data => {
                    const videoPlayer = document.getElementById('video-player');
                    videoPlayer.src = data.videoUrl;
                    videoPlayer.title = data.title;
                });
        });
    </script>
</body>
</html>
app.get('/video/:id', async (req, res) => {
    try {
        const video = await Video.findById(req.params.id);
        res.json({
            videoUrl: video.url,
            title: video.title
        });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения видео' });
    }
});
const mongoose = require('mongoose');

const videoSchema = new mongoose.Schema({
    title: { type: String, required: true },
    url: { type: String, required: true },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Video', videoSchema);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Комментарии</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Комментарии</h1>
    </header>

    <div class="container">
        <section id="comments">
            <h2>Комментарии</h2>
            <div id="comments-list">
                <!-- Комментарии будут загружаться сюда -->
            </div>
            <textarea id="new-comment" placeholder="Напишите комментарий..."></textarea>
            <button id="submit-comment">Отправить</button>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const contentId = window.location.pathname.split('/').pop();

            fetch(`/comments/${contentId}`)
                .then(response => response.json())
                .then(comments => {
                    const commentsList = document.getElementById('comments-list');
                    comments.forEach(comment => {
                        const div = document.createElement('div');
                        div.className = 'comment-item';
                        div.innerHTML = `
                            <p><strong>${comment.username}:</strong> ${comment.text}</p>
                        `;
                        commentsList.appendChild(div);
                    });
                });

            document.getElementById('submit-comment').addEventListener('click', function () {
                const newComment = document.getElementById('new-comment').value;

                fetch(`/comments/${contentId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text: newComment })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const div = document.createElement('div');
                        div.className = 'comment-item';
                        div.innerHTML = `
                            <p><strong>Вы:</strong> ${newComment}</p>
                        `;
                        document.getElementById('comments-list').appendChild(div);
                        document.getElementById('new-comment').value = '';
                    } else {
                        alert('Ошибка отправки комментария');
                    }
                });
            });
        });
    </script>
</body>
</html>
const Comment = require('./models/Comment');

app.get('/comments/:contentId', async (req, res) => {
    try {
        const comments = await Comment.find({ contentId: req.params.contentId });
        res.json(comments);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения комментариев' });
    }
});

app.post('/comments/:contentId', async (req, res) => {
    try {
        const comment = new Comment({
            contentId: req.params.contentId,
            userId: req.user._id,
            text: req.body.text
        });
        await comment.save();
        res.json({ success: true });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка отправки комментария' });
    }
});
const mongoose = require('mongoose');

const commentSchema = new mongoose.Schema({
    contentId: { type: mongoose.Schema.Types.ObjectId, ref: 'Content', required: true },
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    text: { type: String, required: true },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Comment', commentSchema);
const http = require('http');
const socketIo = require('socket.io');
const app = require('./app'); // Основное приложение
const server = http.createServer(app);
const io = socketIo(server);

io.on('connection', (socket) => {
    console.log('New client connected');
    
    // Отправка уведомлений
    socket.on('sendNotification', (notification) => {
        io.emit('notification', notification);
    });

    socket.on('disconnect', () => {
        console.log('Client disconnected');
    });
});

server.listen(3000, () => {
    console.log('Server listening on port 3000');
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Уведомления</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Уведомления</h1>
    </header>

    <div class="container">
        <section id="notifications">
            <h2>Ваши уведомления</h2>
            <div id="notification-list">
                <!-- Уведомления будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        socket.on('notification', (notification) => {
            const notificationList = document.getElementById('notification-list');
            const div = document.createElement('div');
            div.className = 'notification-item';
            div.innerHTML = `
                <h4>${notification.title}</h4>
                <p>${notification.message}</p>
            `;
            notificationList.appendChild(div);
        });
    </script>
</body>
</html>
const csrf = require('csurf');
const cookieParser = require('cookie-parser');
const csrfProtection = csrf({ cookie: true });

app.use(cookieParser());
app.use(csrfProtection);

app.use((req, res, next) => {
    res.locals.csrfToken = req.csrfToken();
    next();
});
const helmet = require('helmet');
app.use(helmet());
const speakeasy = require('speakeasy');
const qrcode = require('qrcode');

app.post('/setup-2fa', async (req, res) => {
    const secret = speakeasy.generateSecret();
    const user = await User.findById(req.user._id);
    user.twoFactorSecret = secret.base32;
    await user.save();

    qrcode.toDataURL(secret.otpauth_url, (err, data_url) => {
        res.json({ secret: secret.base32, qrCodeUrl: data_url });
    });
});

app.post('/verify-2fa', async (req, res) => {
    const { token } = req.body;
    const user = await User.findById(req.user._id);

    const verified = speakeasy.verify({
        secret: user.twoFactorSecret,
        token,
        encoding: 'base32'
    });

    if (verified) {
        res.json({ success: true });
    } else {
        res.status(400).json({ error: 'Неверный токен' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ панель</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Админ панель</h1>
    </header>

    <div class="container">
        <section id="admin">
            <h2>Управление пользователями</h2>
            <div id="user-list">
                <!-- Список пользователей будет загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('/admin/users')
                .then(response => response.json())
                .then(users => {
                    const userList = document.getElementById('user-list');
                    users.forEach(user => {
                        const div = document.createElement('div');
                        div.className = 'user-item';
                        div.innerHTML = `
                            <h3>${user.username}</h3>
                            <p>${user.email}</p>
                            <button data-user-id="${user._id}" class="delete-user">Удалить</button>
                        `;
                        userList.appendChild(div);
                    });

                    document.querySelectorAll('.delete-user').forEach(button => {
                        button.addEventListener('click', function () {
                            fetch(`/admin/users/${this.dataset.userId}`, {
                                method: 'DELETE'
                            })
                            .then(response => response.json())
                            .then(data => {
                                if (data.success) {
                                    this.parentElement.remove();
                                } else {
                                    alert('Ошибка удаления пользователя');
                                }
                            });
                        });
                    });
                });
        });
    </script>
</body>
</html>
const admin = require('./middlewares/admin');

app.use('/admin', admin);

app.get('/admin/users', async (req, res) => {
    try {
        const users = await User.find();
        res.json(users);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения пользователей' });
    }
});

app.delete('/admin/users/:id', async (req, res) => {
    try {
        await User.findByIdAndDelete(req.params.id);
        res.json({ success: true });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка удаления пользователя' });
    }
});
module.exports = (req, res, next) => {
    if (req.user && req.user.isAdmin) {
        next();
    } else {
        res.status(403).json({ error: 'Доступ запрещен' });
    }
};
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Фильмы</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Фильмы</h1>
    </header>

    <div class="container">
        <section id="movies">
            <h2>Популярные фильмы</h2>
            <div id="movie-list">
                <!-- Фильмы будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            fetch('https://api.themoviedb.org/3/movie/popular?api_key=YOUR_API_KEY')
                .then(response => response.json())
                .then(data => {
                    const movieList = document.getElementById('movie-list');
                    data.results.forEach(movie => {
                        const div = document.createElement('div');
                        div.className = 'movie-item';
                        div.innerHTML = `
                            <h3>${movie.title}</h3>
                            <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}">
                            <p>${movie.overview}</p>
                        `;
                        movieList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Поиск</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Поиск контента</h1>
    </header>

    <div class="container">
        <section id="search">
            <h2>Найдите что-то</h2>
            <input type="text" id="search-query" placeholder="Введите запрос...">
            <button id="search-button">Поиск</button>
            <div id="search-results">
                <!-- Результаты поиска будут загружаться сюда -->
            </div>
        </section>
    </div>

    <script>
        document.getElementById('search-button').addEventListener('click', function () {
            const query = document.getElementById('search-query').value;
            fetch(`/search?q=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(results => {
                    const searchResults = document.getElementById('search-results');
                    searchResults.innerHTML = '';
                    results.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'search-result-item';
                        div.innerHTML = `
                            <h3><a href="/content/${item._id}">${item.title}</a></h3>
                            <p>${item.description}</p>
                        `;
                        searchResults.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
const Content = require('./models/Content');

app.get('/search', async (req, res) => {
    try {
        const query = req.query.q;
        const results = await Content.find({
            title: { $regex: query, $options: 'i' }
        });
        res.json(results);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка поиска' });
    }
});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Поделиться</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Поделиться в социальных сетях</h1>
    </header>

    <div class="container">
        <section id="social-share">
            <h2>Поделитесь этим контентом</h2>
            <div class="social-buttons">
                <a href="#" id="share-facebook">Facebook</a>
                <a href="#" id="share-twitter">Twitter</a>
                <a href="#" id="share-linkedin">LinkedIn</a>
            </div>
        </section>
    </div>

    <script>
        document.getElementById('share-facebook').addEventListener('click', function () {
            const url = window.location.href;
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        });

        document.getElementById('share-twitter').addEventListener('click', function () {
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}`, '_blank');
        });

        document.getElementById('share-linkedin').addEventListener('click', function () {
            const url = window.location.href;
            window.open(`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(url)}`, '_blank');
        });
    </script>
</body>
</html>
const cache = require('memory-cache');

app.use((req, res, next) => {
    const key = req.originalUrl || req.url;
    const cachedResponse = cache.get(key);

    if (cachedResponse) {
        res.send(cachedResponse);
    } else {
        res.sendResponse = res.send;
        res.send = (body) => {
            cache.put(key, body, 60000); // Кэшировать на 60 секунд
            res.sendResponse(body);
        };
        next();
    }
});
npm install sharp
const sharp = require('sharp');

app.get('/image/:filename', async (req, res) => {
    try {
        const { filename } = req.params;
        const imagePath = `./images/${filename}`;
        sharp(imagePath)
            .resize(800) // Изменить размер
            .toBuffer((err, buffer) => {
                if (err) {
                    res.status(500).send('Ошибка обработки изображения');
                } else {
                    res.set('Content-Type', 'image/jpeg');
                    res.send(buffer);
                }
            });
    } catch (error) {
        res.status(500).send('Ошибка загрузки изображения');
    }
});
npm install i18next i18next-express-middleware i18next-fs-backend
const i18next = require('i18next');
const i18nextMiddleware = require('i18next-express-middleware');
const Backend = require('i18next-fs-backend');

i18next
    .use(Backend)
    .use(i18nextMiddleware.LanguageDetector)
    .init({
        backend: {
            loadPath: './locales/{{lng}}/{{ns}}.json'
        },
        fallbackLng: 'en',
        preload: ['en', 'fr', 'de'], // Поддерживаемые языки
    });

app.use(i18nextMiddleware.handle(i18next));

app.get('/', (req, res) => {
    res.send(req.t('welcome')); // Пример использования перевода
});
{
    "welcome": "Welcome to our website!"
}
{
    "welcome": "Bienvenue sur notre site Web!"
}
{
    "welcome": "Willkommen auf unserer Website!"
}
/project-root
│
├── public
│   ├── styles.css
│   ├── images
│   ├── socket.io
│   └── ...
│
├── views
│   ├── index.html
│   ├── content.html
│   ├── search.html
│   ├── notifications.html
│   ├── admin.html
│   └── ...
│
├── models
│   ├── User.js
│   ├── Content.js
│   └── Comment.js
│
├── middlewares
│   └── admin.js
│
├── locales
│   ├── en
│   │   └── translation.json
│   ├── fr
│   │   └── translation.json
│   └── de
│       └── translation.json
│
├── server.js
├── package.json
└── .env
const express = require('express');
const mongoose = require('mongoose');
const path = require('path');
const helmet = require('helmet');
const csrf = require('csurf');
const cookieParser = require('cookie-parser');
const i18next = require('i18next');
const i18nextMiddleware = require('i18next-express-middleware');
const Backend = require('i18next-fs-backend');
const socketIo = require('socket.io');
const http = require('http');

const User = require('./models/User');
const Content = require('./models/Content');
const Comment = require('./models/Comment');
const admin = require('./middlewares/admin');

const app = express();
const server = http.createServer(app);
const io = socketIo(server);

mongoose.connect('mongodb://localhost/your-database', { useNewUrlParser: true, useUnifiedTopology: true });

app.use(express.json());
app.use(express.static(path.join(__dirname, 'public')));
app.use(cookieParser());
app.use(helmet());
app.use(csrf({ cookie: true }));

i18next
    .use(Backend)
    .use(i18nextMiddleware.LanguageDetector)
    .init({
        backend: {
            loadPath: path.join(__dirname, 'locales', '{{lng}}', 'translation.json')
        },
        fallbackLng: 'en',
        preload: ['en', 'fr', 'de'],
    });

app.use(i18nextMiddleware.handle(i18next));

app.use((req, res, next) => {
    res.locals.csrfToken = req.csrfToken();
    next();
});

app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname, 'views', 'index.html'));
});

app.get('/content/:id', (req, res) => {
    res.sendFile(path.join(__dirname, 'views', 'content.html'));
});

app.get('/search', async (req, res) => {
    try {
        const query = req.query.q;
        const results = await Content.find({
            title: { $regex: query, $options: 'i' }
        });
        res.json(results);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка поиска' });
    }
});

app.post('/setup-2fa', async (req, res) => {
    const secret = speakeasy.generateSecret();
    const user = await User.findById(req.user._id);
    user.twoFactorSecret = secret.base32;
    await user.save();

    qrcode.toDataURL(secret.otpauth_url, (err, data_url) => {
        res.json({ secret: secret.base32, qrCodeUrl: data_url });
    });
});

app.post('/verify-2fa', async (req, res) => {
    const { token } = req.body;
    const user = await User.findById(req.user._id);

    const verified = speakeasy.verify({
        secret: user.twoFactorSecret,
        token,
        encoding: 'base32'
    });

    if (verified) {
        res.json({ success: true });
    } else {
        res.status(400).json({ error: 'Неверный токен' });
    }
});

app.get('/admin/users', async (req, res) => {
    try {
        const users = await User.find();
        res.json(users);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения пользователей' });
    }
});

app.delete('/admin/users/:id', async (req, res) => {
    try {
        await User.findByIdAndDelete(req.params.id);
        res.json({ success: true });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка удаления пользователя' });
    }
});

app.get('/comments/:contentId', async (req, res) => {
    try {
        const comments = await Comment.find({ contentId: req.params.contentId });
        res.json(comments);
    } catch (error) {
        res.status(500).json({ error: 'Ошибка получения комментариев' });
    }
});

app.post('/comments/:contentId', async (req, res) => {
    try {
        const comment = new Comment({
            contentId: req.params.contentId,
            userId: req.user._id,
            text: req.body.text
        });
        await comment.save();
        res.json({ success: true });
    } catch (error) {
        res.status(500).json({ error: 'Ошибка отправки комментария' });
    }
});

io.on('connection', (socket) => {
    console.log('New client connected');
    
    socket.on('sendNotification', (notification) => {
        io.emit('notification', notification);
    });

    socket.on('disconnect', () => {
        console.log('Client disconnected');
    });
});

server.listen(3000, () => {
    console.log('Server listening on port 3000');
});
const mongoose = require('mongoose');
const userSchema = new mongoose.Schema({
    username: String,
    email: String,
    password: String,
    isAdmin: Boolean,
    twoFactorSecret: String
});

module.exports = mongoose.model('User', userSchema);
const mongoose = require('mongoose');
const contentSchema = new mongoose.Schema({
    title: String,
    description: String,
    // Дополнительные поля
});

module.exports = mongoose.model('Content', contentSchema);
const mongoose = require('mongoose');
const commentSchema = new mongoose.Schema({
    contentId: { type: mongoose.Schema.Types.ObjectId, ref: 'Content', required: true },
    userId: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },
    text: { type: String, required: true },
    createdAt: { type: Date, default: Date.now }
});

module.exports = mongoose.model('Comment', commentSchema);
module.exports = (req, res, next) => {
    if (req.user && req.user.isAdmin) {
        next();
    } else {
        res.status(403).json({ error: 'Доступ запрещен' });
    }
};
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Главная страница</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <header>
        <h1>Добро пожаловать на наш сайт</h1>
        <nav>
            <a href="/">Главная</a>
            <a href="/search">Поиск</a>
            <a href="/notifications">Уведомления</a>
            <a href="/admin">Админ панель</a>
        </nav>
    </header>

    <div class="container">
        <section id="welcome">
            <h2>Последний контент</h2>
            <div id="latest-content">
                <!-- Последний контент будет загружаться сюда -->
            </div>
        </section>
    </div>
</body>
</html>
npm install
node server.js
